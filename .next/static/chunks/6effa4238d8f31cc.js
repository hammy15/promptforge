(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,49785,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(22016),i=e.i(18566),n=e.i(1196);function r({content:e,children:a,position:i="top",delay:n=300}){let[r,l]=(0,s.useState)(!1),[c,o]=(0,s.useState)({x:0,y:0}),d=(0,s.useRef)(null),m=(0,s.useRef)(null),x=(0,s.useRef)(),p=()=>{x.current=setTimeout(()=>{l(!0)},n)},u=()=>{x.current&&clearTimeout(x.current),l(!1)};return(0,s.useEffect)(()=>{if(r&&d.current&&m.current){let e=d.current.getBoundingClientRect(),t=m.current.getBoundingClientRect(),s=0,a=0;switch(i){case"top":s=e.left+e.width/2-t.width/2,a=e.top-t.height-8;break;case"bottom":s=e.left+e.width/2-t.width/2,a=e.bottom+8;break;case"left":s=e.left-t.width-8,a=e.top+e.height/2-t.height/2;break;case"right":s=e.right+8,a=e.top+e.height/2-t.height/2}o({x:s=Math.max(8,Math.min(s,window.innerWidth-t.width-8)),y:a=Math.max(8,Math.min(a,window.innerHeight-t.height-8))})}},[r,i]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{ref:d,onMouseEnter:p,onMouseLeave:u,onFocus:p,onBlur:u,className:"inline-flex",children:a}),r&&(0,t.jsx)("div",{ref:m,className:"fixed z-50 px-3 py-2 text-sm bg-gray-800 border border-gray-700 rounded-lg shadow-xl animate-fade-in max-w-xs",style:{left:c.x,top:c.y},children:e})]})}function l({content:e}){return(0,t.jsx)(r,{content:e,position:"top",children:(0,t.jsx)("button",{className:"p-1 text-gray-500 hover:text-teal-400 transition-colors rounded-full hover:bg-teal-500/10",children:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z"})})})})}var c=e.i(52393);let o=[{type:"remove_filler",pattern:/\b(basically|essentially|actually|really|very|quite|somewhat|rather)\b/gi,replacement:"",description:"Remove filler words",aggressiveness:"low"},{type:"remove_filler",pattern:/\b(in order to)\b/gi,replacement:"to",description:'Simplify "in order to"',aggressiveness:"low"},{type:"remove_filler",pattern:/\b(at this point in time)\b/gi,replacement:"now",description:'Simplify "at this point in time"',aggressiveness:"low"},{type:"remove_filler",pattern:/\b(due to the fact that)\b/gi,replacement:"because",description:'Simplify "due to the fact that"',aggressiveness:"low"},{type:"remove_filler",pattern:/\b(in the event that)\b/gi,replacement:"if",description:'Simplify "in the event that"',aggressiveness:"low"},{type:"simplify_phrase",pattern:/\b(it is important to note that)\b/gi,replacement:"Note:",description:"Simplify importance markers",aggressiveness:"low"},{type:"simplify_phrase",pattern:/\b(please make sure to|please ensure that|make sure to|ensure that)\b/gi,replacement:"",description:"Remove unnecessary politeness",aggressiveness:"medium"},{type:"simplify_phrase",pattern:/\b(I would like you to|I want you to)\b/gi,replacement:"",description:"Remove request preamble",aggressiveness:"medium"},{type:"simplify_phrase",pattern:/\b(as mentioned (above|earlier|previously|before))\b/gi,replacement:"",description:"Remove reference to earlier content",aggressiveness:"medium"},{type:"remove_redundancy",pattern:/\b(absolutely essential|completely unique|very unique|totally unique)\b/gi,replacement:(e,...t)=>t[0]?.split(" ").pop()||"essential",description:"Remove redundant modifiers",aggressiveness:"low"},{type:"remove_redundancy",pattern:/\b(free gift|advance planning|past history|future plans)\b/gi,replacement:(e,...t)=>t[0]?.split(" ").pop()||"",description:"Remove redundant word pairs",aggressiveness:"low"},{type:"remove_redundancy",pattern:/(\.\s*){2,}/g,replacement:". ",description:"Remove multiple periods",aggressiveness:"low"},{type:"abbreviate",pattern:/\b(for example)\b/gi,replacement:"e.g.",description:'Abbreviate "for example"',aggressiveness:"medium"},{type:"abbreviate",pattern:/\b(that is to say)\b/gi,replacement:"i.e.",description:'Abbreviate "that is to say"',aggressiveness:"medium"},{type:"abbreviate",pattern:/\b(and so on|et cetera)\b/gi,replacement:"etc.",description:'Abbreviate "and so on"',aggressiveness:"medium"},{type:"restructure",pattern:/\b(the reason (why|that) is (because)?)\b/gi,replacement:"because",description:"Simplify reason constructions",aggressiveness:"low"},{type:"restructure",pattern:/\b(there (is|are) [^.]*? that)\b/gi,replacement:"",description:'Remove "there is/are" constructions',aggressiveness:"high"},{type:"restructure",pattern:/\b(it is (clear|obvious|evident) that)\b/gi,replacement:"",description:"Remove obvious markers",aggressiveness:"medium"},{type:"remove_redundancy",pattern:/\n{3,}/g,replacement:"\n\n",description:"Reduce excessive line breaks",aggressiveness:"low"},{type:"remove_redundancy",pattern:/\s{2,}/g,replacement:" ",description:"Reduce excessive spaces",aggressiveness:"low"}];function d(e,t={}){let{targetReduction:s=.3,preserveExamples:a=!0,preserveFormatting:i=!0,aggressiveness:n="medium",customPatterns:r=[]}=t,l=m(e),c=[],x=e,p={low:1,medium:2,high:3},u=o.filter(e=>p[e.aggressiveness]<=p[n]);for(let{pattern:e,replacement:t}of r){let s=x;s!==(x=x.replace(e,t))&&c.push({type:"restructure",original:s.match(e)?.[0]||"",compressed:t,tokensSaved:m(s)-m(x)})}for(let e of u){let t=x;if(t!==(x=x.replace(e.pattern,e.replacement))){let s=t.match(e.pattern);c.push({type:e.type,original:s?.[0]||"",compressed:"string"==typeof e.replacement?e.replacement:"",tokensSaved:m(t)-m(x)})}}if(!a)for(let e of[/## Examples?\n[\s\S]*?(?=##|$)/gi,/\bExample:[\s\S]*?(?=\n\n|$)/gi,/\bFor instance:[\s\S]*?(?=\n\n|$)/gi]){let t=x;t!==(x=x.replace(e,""))&&c.push({type:"remove_examples",original:t.match(e)?.[0]||"",compressed:"",tokensSaved:m(t)-m(x)})}i||(x=x.replace(/\*\*([^*]+)\*\*/g,"$1").replace(/__([^_]+)__/g,"$1").replace(/\*([^*]+)\*/g,"$1").replace(/_([^_]+)_/g,"$1").replace(/`([^`]+)`/g,"$1").replace(/^#+\s*/gm,""));let h=m(x=x.replace(/\s+/g," ").replace(/\n\s*\n/g,"\n\n").trim());return{original:e,compressed:x,originalTokens:l,compressedTokens:h,savings:Math.round((l-h)/l*1e3)/10,changes:c}}function m(e){return Math.ceil(1.3*e.split(/\s+/).length)}let x=[{type:"email",pattern:/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/g,confidence:"high",description:"Email address"},{type:"phone",pattern:/(?:\+?1[-.\s]?)?\(?[0-9]{3}\)?[-.\s]?[0-9]{3}[-.\s]?[0-9]{4}/g,confidence:"high",description:"Phone number"},{type:"ssn",pattern:/\b\d{3}[-\s]?\d{2}[-\s]?\d{4}\b/g,confidence:"high",description:"Social Security Number"},{type:"credit_card",pattern:/\b(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|3[47][0-9]{13}|6(?:011|5[0-9]{2})[0-9]{12}|3(?:0[0-5]|[68][0-9])[0-9]{11})\b/g,confidence:"high",description:"Credit card number"},{type:"ip_address",pattern:/\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b/g,confidence:"high",description:"IP address"},{type:"date_of_birth",pattern:/\b(?:DOB|Date of Birth|Born|Birthday)[:\s]*(\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4})\b/gi,confidence:"medium",description:"Date of birth"},{type:"api_key",pattern:/\b(?:sk-[a-zA-Z0-9]{20,}|api[_-]?key[:\s=]+['"]?[a-zA-Z0-9_-]{20,}['"]?)\b/gi,confidence:"high",description:"API key"},{type:"api_key",pattern:/\bAKIA[0-9A-Z]{16}\b/g,confidence:"high",description:"AWS Access Key"},{type:"password",pattern:/(?:password|passwd|pwd)[:\s=]+['"]?[^\s'"]{8,}['"]?/gi,confidence:"medium",description:"Password"},{type:"bank_account",pattern:/\b(?:account|acct)[:\s#]*\d{8,17}\b/gi,confidence:"medium",description:"Bank account number"},{type:"passport",pattern:/\b(?:passport)[:\s#]*[A-Z0-9]{6,9}\b/gi,confidence:"medium",description:"Passport number"}];function p(e){let t=[];for(let s of x){let a,i=new RegExp(s.pattern.source,s.pattern.flags);for(;null!==(a=i.exec(e));){let e=a[0];t.push({type:s.type,value:e,redactedValue:function(e,t){switch(t){case"email":let[s,a]=e.split("@");return`${s[0]}***@${a}`;case"phone":return e.replace(/\d(?=\d{4})/g,"*");case"ssn":return"***-**-"+e.slice(-4);case"credit_card":return"**** **** **** "+e.slice(-4);case"api_key":return e.slice(0,4)+"****"+e.slice(-4);default:if(e.length<=4)return"****";return e.slice(0,2)+"*".repeat(e.length-4)+e.slice(-2)}}(e,s.type),startIndex:a.index,endIndex:a.index+e.length,confidence:s.confidence})}}t.sort((e,t)=>e.startIndex-t.startIndex);let s=[];for(let e of t){let t=s.find(t=>e.startIndex<t.endIndex&&e.endIndex>t.startIndex);if(t){if("high"===e.confidence&&"high"!==t.confidence){let a=s.indexOf(t);s[a]=e}}else s.push(e)}return s}function u(e){let t=p(e),s=e;for(let e=t.length-1;e>=0;e--){let a=t[e];s=s.slice(0,a.startIndex)+a.redactedValue+s.slice(a.endIndex)}return{redacted:s,matches:t}}let h=[{type:"instruction_override",patterns:[/ignore\s+(all\s+)?(previous|above|prior)\s+(instructions?|text|context)/gi,/disregard\s+(all\s+)?(previous|above|prior)/gi,/forget\s+(everything|all|what)/gi,/new\s+instructions?:/gi,/override\s+(system|instructions?)/gi],severity:"high",description:"Attempts to override previous instructions"},{type:"role_hijack",patterns:[/you\s+are\s+(now|actually|really)/gi,/pretend\s+(to\s+be|you('re)?)/gi,/act\s+as\s+(if|though)/gi,/roleplay\s+as/gi,/assume\s+the\s+(role|identity)/gi],severity:"high",description:"Attempts to change the AI role or persona"},{type:"delimiter_attack",patterns:[/```\s*(system|admin|developer)/gi,/\[SYSTEM\]/gi,/<\/?system>/gi,/###\s*(SYSTEM|ADMIN)/gi,/---\s*END\s*(PROMPT|SYSTEM)/gi],severity:"medium",description:"Uses delimiters to inject system-level content"},{type:"encoding_attack",patterns:[/base64[:\s]/gi,/\\x[0-9a-f]{2}/gi,/\\u[0-9a-f]{4}/gi,/&#x?[0-9a-f]+;/gi],severity:"medium",description:"Uses encoding to hide malicious content"},{type:"recursive_injection",patterns:[/repeat\s+(this|the\s+following)\s+(forever|indefinitely)/gi,/infinite\s+loop/gi,/call\s+yourself/gi],severity:"low",description:"Attempts to create recursive behavior"},{type:"context_manipulation",patterns:[/the\s+user\s+(actually\s+)?wants/gi,/what\s+they\s+really\s+mean/gi,/the\s+real\s+question/gi,/between\s+the\s+lines/gi],severity:"low",description:"Attempts to manipulate context interpretation"}];function g(e){let t=function(e){let t=[];for(let s of h)for(let a of s.patterns){let i,n=new RegExp(a.source,a.flags);for(;null!==(i=n.exec(e));)t.push({type:s.type,severity:s.severity,pattern:i[0],description:s.description,position:{start:i.index,end:i.index+i[0].length}})}let s={high:0,medium:1,low:2};return t.sort((e,t)=>s[e.severity]-s[t.severity]),t}(e);return 0===t.length?"none":t.some(e=>"high"===e.severity)?"high":t.some(e=>"medium"===e.severity)?"medium":"low"}let b=/\{\{([^}]+)\}\}/g,f=/^([a-zA-Z_][a-zA-Z0-9_]*)(?::([^|]*))?(?:\|(\w+))?$/;function v(e){let t,s=[],a=new Set;for(;null!==(t=b.exec(e));){let e=t[0],i=t[1].trim().match(f);if(i){let n=i[1],r=i[2],l=i[3];a.has(n)||(a.add(n),s.push({name:n,defaultValue:r,type:l||"string",required:void 0===r,position:{start:t.index,end:t.index+e.length}}))}}return s}let j=[{id:"claude-opus-4-5-20250514",name:"Claude Opus 4.5",provider:"anthropic",inputPricePerMillion:15,outputPricePerMillion:75,contextWindow:2e5,maxOutput:32e3},{id:"claude-sonnet-4-20250514",name:"Claude Sonnet 4",provider:"anthropic",inputPricePerMillion:3,outputPricePerMillion:15,contextWindow:2e5,maxOutput:64e3},{id:"claude-3-5-haiku-20241022",name:"Claude 3.5 Haiku",provider:"anthropic",inputPricePerMillion:.25,outputPricePerMillion:1.25,contextWindow:2e5,maxOutput:8192},{id:"gpt-4o",name:"GPT-4o",provider:"openai",inputPricePerMillion:5,outputPricePerMillion:15,contextWindow:128e3,maxOutput:16384},{id:"gpt-4-turbo",name:"GPT-4 Turbo",provider:"openai",inputPricePerMillion:10,outputPricePerMillion:30,contextWindow:128e3,maxOutput:4096},{id:"gpt-3.5-turbo",name:"GPT-3.5 Turbo",provider:"openai",inputPricePerMillion:.5,outputPricePerMillion:1.5,contextWindow:16385,maxOutput:4096},{id:"gemini-1.5-pro",name:"Gemini 1.5 Pro",provider:"google",inputPricePerMillion:3.5,outputPricePerMillion:10.5,contextWindow:1e6,maxOutput:8192},{id:"gemini-1.5-flash",name:"Gemini 1.5 Flash",provider:"google",inputPricePerMillion:.075,outputPricePerMillion:.3,contextWindow:1e6,maxOutput:8192}];function N(e,t,s){let a=j.find(e=>e.id===s);if(!a)throw Error(`Unknown model: ${s}`);let i=function(e){if(!e)return 0;let t=e.match(/[\w]+|[^\w\s]|\s+/g)||[],s=0;for(let e of t)/^\s+$/.test(e)?s+=Math.ceil(e.length/4):/^[\w]+$/.test(e)?e.length<=4?s+=1:e.length<=8?s+=2:s+=Math.ceil(e.length/4):s+=1;return s}(e),n=Math.min(t,a.maxOutput),r=i*a.inputPricePerMillion/1e6,l=n*a.outputPricePerMillion/1e6;return{inputTokens:i,outputTokens:n,inputCost:r,outputCost:l,totalCost:r+l,model:a}}function y({isOpen:e,onClose:a,currentPrompt:i,targetLLM:r}){let[l,c]=(0,s.useState)([{role:"assistant",content:"Hi! I'm your PromptForge Assistant. I can help you improve your prompts, explain concepts, or suggest better approaches. What would you like help with?",timestamp:new Date}]),[o,d]=(0,s.useState)(""),[m,x]=(0,s.useState)(!1),p=(0,s.useRef)(null);(0,s.useEffect)(()=>{p.current?.scrollIntoView({behavior:"smooth"})},[l]),(0,s.useEffect)(()=>{let e=localStorage.getItem("promptforge-agent-messages");if(e)try{let t=JSON.parse(e);c(t.map(e=>({...e,timestamp:new Date(e.timestamp)})))}catch{}},[]),(0,s.useEffect)(()=>{l.length>1&&localStorage.setItem("promptforge-agent-messages",JSON.stringify(l.slice(-20)))},[l]);let u=async()=>{if(!o.trim()||m)return;let e={role:"user",content:o,timestamp:new Date};c(t=>[...t,e]),d(""),x(!0);try{let t=await fetch("/api/ai/agent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:[...l,e].map(e=>({role:e.role,content:e.content})),currentPrompt:i,targetLLM:r})});if(!t.ok)throw Error("Failed to get response");let s=await t.json(),a={role:"assistant",content:s.response,timestamp:new Date};c(e=>[...e,a])}catch{let e={role:"assistant",content:"I'm sorry, I encountered an error. Please try again.",timestamp:new Date};c(t=>[...t,e])}finally{x(!1)}};return e?(0,t.jsxs)("div",{className:"fixed right-0 top-0 h-full w-96 bg-[#0f2137] border-l border-[#1e3a5f] shadow-2xl z-50 flex flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-[#1e3a5f]",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-[#4ECDC4] to-[#3EB489] flex items-center justify-center",children:(0,t.jsx)(n.Icons.bot,{className:"w-6 h-6 text-[#0a1929]"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-white",children:"AI Assistant"}),(0,t.jsx)("p",{className:"text-xs text-[#64748b]",children:"Prompt engineering help"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("button",{onClick:()=>{c([{role:"assistant",content:"Chat cleared! How can I help you with your prompts?",timestamp:new Date}]),localStorage.removeItem("promptforge-agent-messages")},className:"p-2 text-[#64748b] hover:text-white transition-colors",title:"Clear chat",children:(0,t.jsx)(n.Icons.trash,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:a,className:"p-2 text-[#64748b] hover:text-white transition-colors",children:(0,t.jsx)(n.Icons.close,{className:"w-5 h-5"})})]})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[l.map((e,s)=>(0,t.jsx)("div",{className:`flex ${"user"===e.role?"justify-end":"justify-start"}`,children:(0,t.jsxs)("div",{className:`max-w-[85%] rounded-2xl px-4 py-2.5 ${"user"===e.role?"bg-[#4ECDC4] text-[#0a1929]":"bg-[#1e3a5f] text-white"}`,children:[(0,t.jsx)("div",{className:"text-sm whitespace-pre-wrap",children:e.content}),(0,t.jsx)("div",{className:`text-xs mt-1 ${"user"===e.role?"text-[#0a1929]/60":"text-[#64748b]"}`,children:e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},s)),m&&(0,t.jsx)("div",{className:"flex justify-start",children:(0,t.jsx)("div",{className:"bg-[#1e3a5f] rounded-2xl px-4 py-3",children:(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-[#4ECDC4] animate-bounce",style:{animationDelay:"0s"}}),(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-[#4ECDC4] animate-bounce",style:{animationDelay:"0.2s"}}),(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-[#4ECDC4] animate-bounce",style:{animationDelay:"0.4s"}})]})})}),(0,t.jsx)("div",{ref:p})]}),(0,t.jsx)("div",{className:"px-4 pb-2",children:(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:[{label:"Improve my prompt",action:"Can you suggest improvements for my current prompt?"},{label:"Add examples",action:"Help me add few-shot examples to my prompt"},{label:"Make it clearer",action:"How can I make my prompt clearer and more specific?"},{label:"Best practices",action:"What are the best practices for prompt engineering?"}].map((e,s)=>(0,t.jsx)("button",{onClick:()=>{d(e.action)},className:"text-xs px-2 py-1 rounded-full bg-[#1e3a5f] text-[#94a3b8] hover:text-white hover:bg-[#2d4a6f] transition-colors",children:e.label},s))})}),(0,t.jsx)("div",{className:"p-4 border-t border-[#1e3a5f]",children:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{type:"text",value:o,onChange:e=>d(e.target.value),onKeyDown:e=>"Enter"===e.key&&!e.shiftKey&&u(),placeholder:"Ask me anything...",className:"flex-1 px-4 py-2.5 bg-[#0a1929] border border-[#1e3a5f] rounded-xl text-white placeholder-[#64748b] focus:border-[#4ECDC4] focus:outline-none"}),(0,t.jsx)("button",{onClick:u,disabled:m||!o.trim(),className:`p-2.5 rounded-xl transition-colors ${m||!o.trim()?"bg-[#1e3a5f] text-[#64748b] cursor-not-allowed":"bg-[#4ECDC4] text-[#0a1929] hover:bg-[#c49843]"}`,children:(0,t.jsx)(n.Icons.send,{className:"w-5 h-5"})})]})})]}):null}var w=e.i(11793),C=e.i(1574),k=e.i(1472);function E(){return(0,t.jsx)("div",{className:"min-h-screen bg-[#0a1929] flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-[#4ECDC4] to-[#3EB489] flex items-center justify-center mx-auto mb-4 animate-pulse",children:(0,t.jsx)(n.Icons.chart,{className:"w-7 h-7 text-[#0a1929]"})}),(0,t.jsx)("p",{className:"text-[#94a3b8]",children:"Loading builder..."})]})})}function S(){return(0,t.jsx)(s.Suspense,{fallback:(0,t.jsx)(E,{}),children:(0,t.jsx)(T,{})})}let P=[{id:"ma",name:"M&A & Deal Work",description:"Investment memos, term sheets, due diligence",icon:"handshake",color:"#4ECDC4",categories:["ma"]},{id:"research",name:"Investment Research",description:"Due diligence, competitive intel, sector analysis",icon:"search",color:"#14b8a6",categories:["research"]},{id:"strategy",name:"Strategy & Planning",description:"SWOT analysis, business plans, OKRs",icon:"target",color:"#8b5cf6",categories:["strategy"]},{id:"reporting",name:"Professional Reporting",description:"Board decks, investor updates, executive summaries",icon:"presentation",color:"#f97316",categories:["reporting"]},{id:"analysis",name:"Financial Analysis",description:"DCF, comps, earnings analysis, sensitivity",icon:"chart",color:"#059669",categories:["analysis"]}],D=[{id:"copy",name:"Copy to Clipboard",icon:"copy",description:"Copy prompt text"},{id:"excel",name:"Excel-Ready",icon:"spreadsheet",description:"Formatted for spreadsheets"},{id:"powerpoint",name:"PowerPoint-Ready",icon:"presentation",description:"Slide-friendly format"},{id:"memo",name:"Memo Format",icon:"document",description:"Professional document"},{id:"pdf",name:"PDF Export",icon:"documentChart",description:"Download as PDF"}],I={beginner:{model:"claude-3-5-haiku-20241022",reason:"Fast and cost-effective for simple tasks"},intermediate:{model:"claude-sonnet-4-20250514",reason:"Balanced performance for standard analysis"},advanced:{model:"claude-opus-4-5-20250514",reason:"Maximum capability for complex financial modeling"}};function T(){let e=(0,i.useSearchParams)(),[r,o]=(0,s.useState)("simple"),[m,x]=(0,s.useState)("industry"),[h,b]=(0,s.useState)(""),[f,j]=(0,s.useState)(""),[y,E]=(0,s.useState)(null),[S,T]=(0,s.useState)(null),[M,A]=(0,s.useState)("all"),[$,O]=(0,s.useState)({}),[_,F]=(0,s.useState)(""),[z,U]=(0,s.useState)("copy"),[L,B]=(0,s.useState)(!1),[W,Y]=(0,s.useState)(null),[K,H]=(0,s.useState)(!1),[q,X]=(0,s.useState)(!1),[Z,G]=(0,s.useState)([]),[V,J]=(0,s.useState)("claude-sonnet-4-20250514"),[Q,ee]=(0,s.useState)(!1),[et,es]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let t=e.get("template");if("expert"===e.get("mode")&&o("expert"),t){let e=c.PROMPT_TEMPLATES.find(e=>e.id===t);e&&ea(e)}},[e]),(0,s.useEffect)(()=>{let e=localStorage.getItem("promptforge-history");e&&G(JSON.parse(e))},[]),(0,s.useEffect)(()=>{if(!localStorage.getItem("promptforge-playground-tour")){let e=setTimeout(()=>es(!0),500);return()=>clearTimeout(e)}},[]),(0,s.useEffect)(()=>{if(h.length>10){let e=N(h,500,V),t=p(h),s=d(h),a=g(h);Y({tokens:e.inputTokens,cost:e.totalCost,piiCount:t.length,injectionRisk:a,compressionSavings:s.savings})}else Y(null)},[h,V]),(0,s.useEffect)(()=>{if(S){let e=I[S.difficulty];e&&J(e.model)}},[S]);let ea=e=>{T(e),b(e.prompt),j(e.prompt);let t={};e.variables.forEach(e=>{t[e.name]=e.default}),O(t),x("customize")},ei=(e,t)=>{O(s=>({...s,[e]:t}))},en=(0,s.useCallback)(()=>S?function(e,t,s={}){let{strict:a=!1,preserveUnknown:i=!1}=s,n=v(e),r=[],l=e;for(let e of[...n].sort((e,t)=>t.position.start-e.position.start)){let{name:s,defaultValue:a,type:n,required:c}=e,o=t[s];if(void 0===o){if(void 0!==a)o=a;else if(c){if(r.push(s),!i)continue}else if(i)continue}let d=function(e,t){if(null==e)return"";switch(t){case"json":return"string"==typeof e?e:JSON.stringify(e,null,2);case"array":return Array.isArray(e)?e.join(", "):String(e);case"number":return String(Number(e));case"boolean":return e?"true":"false";default:return String(e)}}(o,n),m=RegExp(`\\{\\{${s}(?::[^|]*)?(?:\\|\\w+)?\\}\\}`,"g");l=l.replace(m,d)}if(a&&r.length>0)throw Error(`Missing required variables: ${r.join(", ")}`);return l}(S.prompt,$):h,[S,$,h]),er=e=>{let t="simple"===r?en():h;switch(e){case"excel":return`=== EXCEL-READY FORMAT ===

${t}

=== OUTPUT INSTRUCTIONS ===
Please format all numerical data in tables with:
- Column headers in Row 1
- Currency values with $ symbol and 2 decimal places
- Percentages with % symbol and 1 decimal place
- Dates in YYYY-MM-DD format`;case"powerpoint":return`=== PRESENTATION FORMAT ===

${t}

=== OUTPUT INSTRUCTIONS ===
Please format output as:
- Bullet points (max 5-7 per section)
- Clear section headers
- Key metrics highlighted
- Executive summary at the top`;case"memo":let s=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return`=== MEMO FORMAT ===
Date: ${s}
Re: ${S?.name||"Analysis"}

${t}

=== OUTPUT INSTRUCTIONS ===
Please structure the response as a professional memo with:
- Executive Summary
- Key Findings
- Detailed Analysis
- Recommendations
- Appendix (if applicable)`;default:return t}},el=async()=>{let e=er(z);await navigator.clipboard.writeText(e),H(!0),setTimeout(()=>H(!1),2e3);let t=[e,...Z.slice(0,9)];G(t),localStorage.setItem("promptforge-history",JSON.stringify(t)),L&&console.log("Audit Log:",{timestamp:new Date().toISOString(),template:S?.name||"Custom",format:z,tokens:W?.tokens||0,cost:W?.cost||0})},ec=c.PROMPT_TEMPLATES.filter(e=>{let t="all"===M||e.category===M,s=""===_||e.name.toLowerCase().includes(_.toLowerCase())||e.description.toLowerCase().includes(_.toLowerCase());return t&&s}),eo=[{id:"industry",name:"Industry",icon:"building"},{id:"template",name:"Template",icon:"documentChart"},{id:"customize",name:"Details",icon:"wand"},{id:"review",name:"Review",icon:"eye"},{id:"export",name:"Export",icon:"download"}],ed=eo.findIndex(e=>e.id===m);return(0,t.jsxs)("div",{className:"min-h-screen bg-[#0a1929]",children:[(0,t.jsx)("div",{className:"fixed inset-0 bg-gradient-mesh pointer-events-none opacity-30"}),(0,t.jsx)("header",{className:"relative z-10 border-b border-[#1e3a5f]",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(a.default,{href:"/",className:"flex items-center gap-3 hover:opacity-80 transition-opacity",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-[#4ECDC4] to-[#3EB489] flex items-center justify-center",children:(0,t.jsx)(n.Icons.chart,{className:"w-6 h-6 text-[#0a1929]"})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("span",{className:"text-xl font-bold",children:[(0,t.jsx)("span",{className:"text-[#4ECDC4]",children:"Prompt"}),(0,t.jsx)("span",{className:"text-white",children:"Forge"})]}),(0,t.jsx)("span",{className:"ml-2 text-xs px-2 py-0.5 bg-[rgba(78,205,196,0.2)] text-[#4ECDC4] rounded-full",children:"simple"===r?"Simple":"Expert"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex bg-[#0f2137] rounded-xl p-1 border border-[#1e3a5f]","data-tour":"mode-toggle",children:[(0,t.jsxs)("button",{onClick:()=>o("simple"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${"simple"===r?"bg-[#4ECDC4] text-[#0a1929]":"text-[#94a3b8] hover:text-white"}`,children:[(0,t.jsx)(n.Icons.wand,{className:"w-4 h-4 inline mr-2"}),"Simple"]}),(0,t.jsxs)("button",{onClick:()=>o("expert"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${"expert"===r?"bg-[#4ECDC4] text-[#0a1929]":"text-[#94a3b8] hover:text-white"}`,children:[(0,t.jsx)(n.Icons.beaker,{className:"w-4 h-4 inline mr-2"}),"Expert"]})]}),(0,t.jsx)("button",{onClick:()=>ee(!Q),className:`p-2 transition-colors ${Q?"text-[#4ECDC4]":"text-[#64748b] hover:text-[#4ECDC4]"}`,title:"AI Assistant",children:(0,t.jsx)(n.Icons.bot,{className:"w-5 h-5"})}),(0,t.jsx)("button",{onClick:()=>X(!q),className:"p-2 text-[#64748b] hover:text-[#4ECDC4] transition-colors",children:(0,t.jsx)(n.Icons.history,{className:"w-5 h-5"})})]})]})})}),(0,t.jsxs)("main",{className:"relative z-10 max-w-7xl mx-auto px-6 py-8",children:["simple"===r&&(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsx)("div",{className:"flex items-center justify-center gap-2 overflow-x-auto pb-2",children:eo.map((e,s)=>(n.Icons[e.icon],(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsxs)("button",{onClick:()=>s<=ed&&x(e.id),disabled:s>ed,className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all ${e.id===m?"bg-[#4ECDC4] text-[#0a1929]":s<ed?"bg-[rgba(78,205,196,0.2)] text-[#4ECDC4] hover:bg-[rgba(78,205,196,0.3)]":"bg-[#0f2137] text-[#64748b] border border-[#1e3a5f]"}`,children:[(0,t.jsx)("span",{className:"w-6 h-6 rounded-full bg-current/20 flex items-center justify-center text-sm",children:s+1}),(0,t.jsx)("span",{className:"hidden sm:inline",children:e.name})]}),s<eo.length-1&&(0,t.jsx)(n.Icons.chevronRight,{className:"w-4 h-4 text-[#334155] mx-2"})]},e.id)))}),(0,t.jsxs)("div",{className:"animate-fade-in",children:["industry"===m&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:"Select Your Domain"}),(0,t.jsx)("p",{className:"text-[#94a3b8]",children:"Choose your primary use case to see relevant templates"})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4 max-w-4xl mx-auto",children:[P.map(e=>{let s=n.Icons[e.icon];return(0,t.jsx)("button",{onClick:()=>{var t;let s;return E(t=e.id),void((s=P.find(e=>e.id===t))&&s.categories.length>0&&A(s.categories[0]),x("template"))},className:"card p-6 text-left hover:border-[#4ECDC4] transition-all group",children:(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsx)("div",{className:"w-14 h-14 rounded-xl flex items-center justify-center shrink-0",style:{background:`${e.color}20`},children:s&&(0,t.jsx)(s,{className:"w-7 h-7",style:{color:e.color}})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-white group-hover:text-[#4ECDC4] transition-colors",children:e.name}),(0,t.jsx)("p",{className:"text-sm text-[#64748b] mt-1",children:e.description})]})]})},e.id)}),(0,t.jsx)("button",{onClick:()=>{E(null),A("all"),x("template")},className:"card p-6 text-left hover:border-[#4ECDC4] transition-all group border-dashed",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-14 h-14 rounded-xl border-2 border-dashed border-[#334155] flex items-center justify-center",children:(0,t.jsx)(n.Icons.search,{className:"w-7 h-7 text-[#64748b]"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-white group-hover:text-[#4ECDC4] transition-colors",children:"Browse All Templates"}),(0,t.jsx)("p",{className:"text-sm text-[#64748b] mt-1",children:"View all 18 finance templates"})]})]})})]})]}),"template"===m&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:"Choose a Template"}),(0,t.jsx)("p",{className:"text-[#94a3b8]",children:"Select a financial analysis template or start from scratch"})]}),(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:[(0,t.jsx)("div",{className:"flex flex-wrap justify-center gap-2",children:c.TEMPLATE_CATEGORIES.map(e=>(0,t.jsxs)("button",{onClick:()=>A(e.id),className:`px-4 py-2 rounded-xl text-sm transition-all ${M===e.id?"bg-[rgba(78,205,196,0.15)] text-[#4ECDC4] border border-[rgba(78,205,196,0.3)]":"bg-[#0f2137] text-[#94a3b8] hover:text-white border border-[#1e3a5f]"}`,children:[(0,t.jsx)("span",{className:"mr-2",children:e.icon}),e.name]},e.id))}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(n.Icons.search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-[#64748b]"}),(0,t.jsx)("input",{type:"text",placeholder:"Search templates...",value:_,onChange:e=>F(e.target.value),className:"pl-10 pr-4 py-2 bg-[#0f2137] border border-[#1e3a5f] rounded-lg text-sm text-white placeholder-[#64748b] focus:border-[#4ECDC4] focus:outline-none w-64"})]})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[ec.map(e=>(0,t.jsx)("button",{onClick:()=>ea(e),className:"card p-5 text-left hover:border-[#4ECDC4] transition-all group",children:(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-[#4ECDC4] to-[#3EB489] flex items-center justify-center text-2xl shrink-0",children:e.icon}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"font-semibold text-white group-hover:text-[#4ECDC4] transition-colors truncate",children:e.name}),(0,t.jsx)("p",{className:"text-sm text-[#64748b] mt-1 line-clamp-2",children:e.description}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-1 mt-2",children:[(0,t.jsx)("span",{className:`badge badge-${e.difficulty}`,children:e.difficulty}),(0,t.jsx)("span",{className:"text-xs text-[#64748b]",children:e.estimatedTime}),e.outputFormats.includes("excel")&&(0,t.jsx)("span",{className:"badge badge-excel text-xs",children:"Excel"})]})]})]})},e.id)),(0,t.jsx)("button",{onClick:()=>{T(null),b(""),x("customize")},className:"card p-5 text-left hover:border-[#4ECDC4] transition-all group border-dashed",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-xl border-2 border-dashed border-[#334155] flex items-center justify-center",children:(0,t.jsx)(n.Icons.plus,{className:"w-6 h-6 text-[#64748b]"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-white group-hover:text-[#4ECDC4] transition-colors",children:"Start from Scratch"}),(0,t.jsx)("p",{className:"text-sm text-[#64748b] mt-1",children:"Write your own prompt"})]})]})})]}),(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsxs)("button",{onClick:()=>x("industry"),className:"btn-secondary",children:[(0,t.jsx)(n.Icons.arrowLeft,{className:"w-4 h-4 inline mr-2"}),"Back to Industry Selection"]})})]}),"customize"===m&&(0,t.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-4","data-tour":"variables-panel",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-white",children:S?"Financial Details":"Write Your Prompt"}),(0,t.jsx)(l,{content:"Fill in each field to customize your financial analysis prompt."})]}),S?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"card p-4 bg-[rgba(78,205,196,0.1)] border-[rgba(78,205,196,0.2)]",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"text-2xl",children:S.icon}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-white",children:S.name}),(0,t.jsxs)("div",{className:"flex gap-2 mt-1",children:[(0,t.jsx)("span",{className:`badge badge-${S.difficulty}`,children:S.difficulty}),(0,t.jsx)("span",{className:"text-xs text-[#94a3b8]",children:S.estimatedTime})]})]})]})}),S.variables.map(e=>(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("label",{className:"flex items-center gap-2 text-sm font-medium text-[#94a3b8]",children:[(0,t.jsx)("span",{className:"text-[#4ECDC4]",children:`{{${e.name}}}`}),e.type&&(0,t.jsx)("span",{className:"text-xs px-1.5 py-0.5 bg-[#1e3a5f] rounded text-[#64748b]",children:e.type}),(0,t.jsx)(l,{content:e.description})]}),(e=>{let s=e.type||"text",a="input";switch(s){case"currency":return(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[#64748b]",children:"$"}),(0,t.jsx)("input",{type:"text",value:$[e.name]||"",onChange:t=>ei(e.name,t.target.value),className:`${a} pl-8 tabular-nums`,placeholder:e.default||"0.00"})]});case"percentage":return(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:"text",value:$[e.name]||"",onChange:t=>ei(e.name,t.target.value),className:`${a} pr-8 tabular-nums`,placeholder:e.default||"0"}),(0,t.jsx)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-[#64748b]",children:"%"})]});case"number":return(0,t.jsx)("input",{type:"number",value:$[e.name]||"",onChange:t=>ei(e.name,t.target.value),className:`${a} tabular-nums`,placeholder:e.default||"0"});case"date":return(0,t.jsx)("input",{type:"date",value:$[e.name]||"",onChange:t=>ei(e.name,t.target.value),className:a});case"select":let i=e.default.split(",").map(e=>e.trim());return(0,t.jsx)("select",{value:$[e.name]||i[0],onChange:t=>ei(e.name,t.target.value),className:a,children:i.map(e=>(0,t.jsx)("option",{value:e,children:e},e))});case"textarea":return(0,t.jsx)("textarea",{value:$[e.name]||"",onChange:t=>ei(e.name,t.target.value),className:`${a} h-32 resize-none font-mono text-sm`,placeholder:e.description});default:return(0,t.jsx)("input",{type:"text",value:$[e.name]||"",onChange:t=>ei(e.name,t.target.value),className:a,placeholder:e.default||e.description})}})(e)]},e.name))]}):(0,t.jsx)("textarea",{value:h,onChange:e=>b(e.target.value),className:"input h-64 resize-none font-mono text-sm","data-tour":"prompt-editor",placeholder:"Write your financial analysis prompt here...  Tips for finance prompts: • Specify the company/asset being analyzed • Include relevant financial metrics • Define the analysis timeframe • Use {{variables}} for dynamic content • Request specific output formats (tables, charts)"}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsxs)("button",{onClick:()=>x("template"),className:"btn-secondary flex-1",children:[(0,t.jsx)(n.Icons.arrowLeft,{className:"w-4 h-4 inline mr-2"}),"Back"]}),(0,t.jsxs)("button",{onClick:()=>x("review"),disabled:S?Object.values($).some(e=>!e):!h,className:"btn-primary flex-1 disabled:opacity-50 disabled:cursor-not-allowed",children:["Continue to Review",(0,t.jsx)(n.Icons.arrowRight,{className:"w-4 h-4 inline ml-2"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4","data-tour":"output-panel",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-white",children:"Live Preview"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-[#64748b]",children:[(0,t.jsx)(n.Icons.eye,{className:"w-4 h-4"}),"Updates as you type"]})]}),(0,t.jsx)("div",{className:"card p-6 min-h-[300px]",children:(0,t.jsx)("pre",{className:"whitespace-pre-wrap text-sm text-[#94a3b8] font-mono",children:S?en():h||"Your prompt will appear here..."})}),W&&(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"card p-4 text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-[#4ECDC4] tabular-nums",children:W.tokens}),(0,t.jsx)("div",{className:"text-xs text-[#64748b]",children:"Tokens"})]}),(0,t.jsxs)("div",{className:"card p-4 text-center",children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-white tabular-nums",children:["$",W.cost.toFixed(4)]}),(0,t.jsx)("div",{className:"text-xs text-[#64748b]",children:"Est. Cost"})]})]}),S&&(0,t.jsxs)("div",{className:"card p-4 bg-[rgba(20,184,166,0.1)] border-[rgba(20,184,166,0.2)]",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-[#14b8a6] mb-2",children:[(0,t.jsx)(n.Icons.lightbulb,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"Recommended Model"})]}),(0,t.jsx)("p",{className:"text-xs text-[#94a3b8]",children:I[S.difficulty].reason})]})]})]}),"review"===m&&(0,t.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:"Review & Optimize"}),(0,t.jsx)("p",{className:"text-[#94a3b8]",children:"Review your prompt and apply optimizations"})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:"card p-4 text-center",children:[(0,t.jsx)("div",{className:"text-3xl font-bold text-[#4ECDC4] tabular-nums",children:W?.tokens||0}),(0,t.jsx)("div",{className:"text-sm text-[#64748b]",children:"Tokens"})]}),(0,t.jsxs)("div",{className:"card p-4 text-center",children:[(0,t.jsxs)("div",{className:"text-3xl font-bold text-[#14b8a6] tabular-nums",children:[W?.compressionSavings||0,"%"]}),(0,t.jsx)("div",{className:"text-sm text-[#64748b]",children:"Can Save"})]}),(0,t.jsxs)("div",{className:"card p-4 text-center",children:[(0,t.jsx)("div",{className:`text-3xl font-bold tabular-nums ${W?.piiCount?"text-[#dc2626]":"text-[#059669]"}`,children:W?.piiCount||0}),(0,t.jsx)("div",{className:"text-sm text-[#64748b]",children:"PII Found"})]}),(0,t.jsxs)("div",{className:"card p-4 text-center",children:[(0,t.jsx)("div",{className:`text-3xl font-bold capitalize ${W?.injectionRisk==="none"?"text-[#059669]":W?.injectionRisk==="low"?"text-[#4ECDC4]":"text-[#dc2626]"}`,children:W?.injectionRisk||"None"}),(0,t.jsx)("div",{className:"text-sm text-[#64748b]",children:"Risk Level"})]})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsx)("button",{onClick:()=>{b(d("simple"===r?en():h,{aggressiveness:"medium"}).compressed)},className:"card p-5 text-left hover:border-[#4ECDC4] transition-all group",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-xl bg-[rgba(78,205,196,0.2)] flex items-center justify-center text-[#4ECDC4]",children:(0,t.jsx)(n.Icons.compress,{className:"w-6 h-6"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-white group-hover:text-[#4ECDC4]",children:"Compress Prompt"}),(0,t.jsxs)("p",{className:"text-sm text-[#64748b]",children:["Remove filler words, save ~",W?.compressionSavings||0,"% tokens"]})]})]})}),(0,t.jsx)("button",{onClick:()=>{let{redacted:e}=u("simple"===r?en():h);b(e)},className:"card p-5 text-left hover:border-[#4ECDC4] transition-all group",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-xl bg-[rgba(220,38,38,0.2)] flex items-center justify-center text-[#dc2626]",children:(0,t.jsx)(n.Icons.shield,{className:"w-6 h-6"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-white group-hover:text-[#4ECDC4]",children:"Redact PII"}),(0,t.jsxs)("p",{className:"text-sm text-[#64748b]",children:["Remove ",W?.piiCount||0," sensitive items found"]})]})]})})]}),(0,t.jsxs)("div",{className:"card p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("span",{className:"text-sm text-[#64748b]",children:"Prompt Preview"}),S&&(0,t.jsx)("div",{className:"flex gap-2",children:S.outputFormats.map(e=>(0,t.jsx)("span",{className:`badge badge-${e} text-xs`,children:e.toUpperCase()},e))})]}),(0,t.jsx)("pre",{className:"whitespace-pre-wrap text-sm text-[#94a3b8] font-mono max-h-64 overflow-auto",children:S?en():h})]}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsxs)("button",{onClick:()=>x("customize"),className:"btn-secondary flex-1",children:[(0,t.jsx)(n.Icons.arrowLeft,{className:"w-4 h-4 inline mr-2"}),"Back"]}),(0,t.jsxs)("button",{onClick:()=>x("export"),className:"btn-primary flex-1",children:["Continue to Export",(0,t.jsx)(n.Icons.arrowRight,{className:"w-4 h-4 inline ml-2"})]})]})]}),"export"===m&&(0,t.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:"Your Prompt is Ready!"}),(0,t.jsx)("p",{className:"text-[#94a3b8]",children:"Choose your export format and copy"})]}),(0,t.jsx)("div",{className:"grid md:grid-cols-5 gap-3",children:D.map(e=>{let s=n.Icons[e.icon];return(0,t.jsxs)("button",{onClick:()=>U(e.id),className:`card p-4 text-center transition-all ${z===e.id?"border-[#4ECDC4] bg-[rgba(78,205,196,0.1)]":"hover:border-[#2d4a6f]"}`,children:[s&&(0,t.jsx)(s,{className:`w-6 h-6 mx-auto mb-2 ${z===e.id?"text-[#4ECDC4]":"text-[#64748b]"}`}),(0,t.jsx)("div",{className:`text-sm font-medium ${z===e.id?"text-[#4ECDC4]":"text-white"}`,children:e.name}),(0,t.jsx)("div",{className:"text-xs text-[#64748b] mt-1",children:e.description})]},e.id)})}),(0,t.jsx)("div",{className:"card p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(n.Icons.documentChart,{className:"w-5 h-5 text-[#64748b]"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-medium text-white",children:"Audit Mode"}),(0,t.jsx)("div",{className:"text-xs text-[#64748b]",children:"Log exports for compliance tracking"})]})]}),(0,t.jsx)("button",{onClick:()=>B(!L),className:`w-12 h-6 rounded-full transition-colors ${L?"bg-[#4ECDC4]":"bg-[#334155]"}`,children:(0,t.jsx)("div",{className:`w-5 h-5 rounded-full bg-white shadow transition-transform ${L?"translate-x-6":"translate-x-0.5"}`})})]})}),(0,t.jsxs)("div",{className:"card p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("span",{className:"text-sm text-[#64748b]",children:"copy"===z?"Final Prompt":`${D.find(e=>e.id===z)?.name} Format`}),(0,t.jsxs)("button",{onClick:el,"data-tour":"run-button",className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-all ${K?"bg-[#059669] text-white":"bg-[rgba(78,205,196,0.2)] text-[#4ECDC4] hover:bg-[rgba(78,205,196,0.3)]"}`,children:[(0,t.jsx)(n.Icons.copy,{className:"w-4 h-4"}),K?"Copied!":"Copy"]})]}),(0,t.jsx)("pre",{className:"whitespace-pre-wrap text-sm text-[#94a3b8] font-mono max-h-64 overflow-auto",children:er(z)})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"card p-4 text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-[#4ECDC4] tabular-nums",children:W?.tokens||0}),(0,t.jsx)("div",{className:"text-xs text-[#64748b]",children:"Total Tokens"})]}),(0,t.jsxs)("div",{className:"card p-4 text-center",children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-white tabular-nums",children:["$",W?.cost.toFixed(4)||"0.0000"]}),(0,t.jsx)("div",{className:"text-xs text-[#64748b]",children:"Estimated Cost"})]}),(0,t.jsxs)("div",{className:"card p-4 text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-[#059669]",children:"✓"}),(0,t.jsx)("div",{className:"text-xs text-[#64748b]",children:"Security Checked"})]})]}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsxs)("button",{onClick:()=>x("review"),className:"btn-secondary flex-1",children:[(0,t.jsx)(n.Icons.arrowLeft,{className:"w-4 h-4 inline mr-2"}),"Back"]}),(0,t.jsxs)("button",{onClick:()=>{x("industry"),E(null),T(null),b(""),O({})},className:"btn-primary flex-1",children:[(0,t.jsx)(n.Icons.plus,{className:"w-4 h-4 inline mr-2"}),"Create Another"]})]})]})]})]}),"expert"===r&&(0,t.jsx)(R,{prompt:h,setPrompt:b,selectedModel:V,setSelectedModel:J,analysisResults:W,onCopy:el,copied:K,auditMode:L,setAuditMode:B})]}),q&&(0,t.jsxs)("div",{className:"fixed inset-y-0 right-0 w-80 bg-[#0f2137] border-l border-[#1e3a5f] z-50 animate-slide-in",children:[(0,t.jsxs)("div",{className:"p-4 border-b border-[#1e3a5f] flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"font-semibold text-white",children:"Recent Prompts"}),(0,t.jsx)("button",{onClick:()=>X(!1),className:"p-1 hover:text-[#4ECDC4]",children:(0,t.jsx)(n.Icons.x,{className:"w-5 h-5"})})]}),(0,t.jsx)("div",{className:"p-4 space-y-3 overflow-auto max-h-[calc(100vh-64px)]",children:0===Z.length?(0,t.jsx)("p",{className:"text-[#64748b] text-sm",children:"No prompts yet. Create one to get started!"}):Z.map((e,s)=>(0,t.jsx)("button",{onClick:()=>{b(e),X(!1),o("expert")},className:"w-full p-3 card text-left hover:border-[#4ECDC4] transition-all",children:(0,t.jsx)("p",{className:"text-sm text-[#94a3b8] line-clamp-3",children:e})},s))})]}),(0,t.jsx)(w.default,{steps:k.PLAYGROUND_WALKTHROUGH,isOpen:et,onClose:()=>es(!1),onComplete:()=>es(!1),storageKey:"promptforge-playground-tour"}),!et&&(0,t.jsx)(C.default,{onClick:()=>es(!0),label:"Help"})]})}function R({prompt:e,setPrompt:a,selectedModel:i,setSelectedModel:r,analysisResults:l,onCopy:c,copied:o,auditMode:m,setAuditMode:x}){let[h,b]=(0,s.useState)(null),[f,w]=(0,s.useState)("medium"),[C,k]=(0,s.useState)("standard"),[E,S]=(0,s.useState)(null);return(0,t.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-white",children:"Prompt Editor"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("select",{value:i,onChange:e=>r(e.target.value),className:"bg-[#0f2137] border border-[#1e3a5f] rounded-lg px-3 py-2 text-sm text-white","data-tour":"model-selector",children:j.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))}),(0,t.jsxs)("button",{onClick:c,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-all ${o?"bg-[#059669] text-white":"bg-[rgba(78,205,196,0.2)] text-[#4ECDC4] hover:bg-[rgba(78,205,196,0.3)]"}`,children:[(0,t.jsx)(n.Icons.copy,{className:"w-4 h-4"}),o?"Copied!":"Copy"]})]})]}),(0,t.jsx)("textarea",{value:e,onChange:e=>a(e.target.value),className:"input h-96 resize-none font-mono text-sm","data-tour":"prompt-editor",placeholder:"Enter your financial analysis prompt here...  Expert tips: • Use {{variable:default|type}} for typed variables • Supported types: text, currency, percentage, number, date, select • Add output format instructions for Excel/slides/memo • Enable audit mode for compliance tracking"}),l&&(0,t.jsxs)("div",{className:"flex items-center gap-6 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-[#64748b]",children:"Tokens:"}),(0,t.jsx)("span",{className:"text-[#4ECDC4] font-medium tabular-nums",children:l.tokens})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-[#64748b]",children:"Cost:"}),(0,t.jsxs)("span",{className:"text-white font-medium tabular-nums",children:["$",l.cost.toFixed(4)]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-[#64748b]",children:"PII:"}),(0,t.jsx)("span",{className:`font-medium tabular-nums ${l.piiCount?"text-[#dc2626]":"text-[#059669]"}`,children:l.piiCount})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-[#64748b]",children:"Risk:"}),(0,t.jsx)("span",{className:`font-medium capitalize ${"none"===l.injectionRisk?"text-[#059669]":"low"===l.injectionRisk?"text-[#4ECDC4]":"text-[#dc2626]"}`,children:l.injectionRisk})]})]}),(0,t.jsx)("div",{className:"card p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(n.Icons.documentChart,{className:"w-5 h-5 text-[#64748b]"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-medium text-white",children:"Audit Mode"}),(0,t.jsx)("div",{className:"text-xs text-[#64748b]",children:"Log exports for compliance tracking"})]})]}),(0,t.jsx)("button",{onClick:()=>x(!m),className:`w-12 h-6 rounded-full transition-colors ${m?"bg-[#4ECDC4]":"bg-[#334155]"}`,children:(0,t.jsx)("div",{className:`w-5 h-5 rounded-full bg-white shadow transition-transform ${m?"translate-x-6":"translate-x-0.5"}`})})]})})]}),(0,t.jsxs)("div",{className:"space-y-4","data-tour":"variables-panel",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-white",children:"Tools"}),(0,t.jsx)("div",{className:"space-y-3",children:[{id:"variables",name:"Variables",icon:"variable",desc:"Extract & substitute"},{id:"compress",name:"Compress",icon:"compress",desc:"Reduce tokens"},{id:"security",name:"Security",icon:"shield",desc:"PII & injection"},{id:"cost",name:"Cost",icon:"calculator",desc:"Token pricing"},{id:"format",name:"Format",icon:"spreadsheet",desc:"Output presets"}].map(s=>{let l=n.Icons[s.icon];return(0,t.jsxs)("div",{className:"card overflow-hidden",children:[(0,t.jsxs)("button",{onClick:()=>b(h===s.id?null:s.id),className:"w-full p-4 flex items-center justify-between hover:bg-[#162a45] transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-lg bg-[rgba(78,205,196,0.2)] flex items-center justify-center text-[#4ECDC4]",children:l&&(0,t.jsx)(l,{className:"w-5 h-5"})}),(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsx)("div",{className:"font-medium text-white",children:s.name}),(0,t.jsx)("div",{className:"text-xs text-[#64748b]",children:s.desc})]})]}),(0,t.jsx)(n.Icons.chevronDown,{className:`w-5 h-5 text-[#64748b] transition-transform ${h===s.id?"rotate-180":""}`})]}),h===s.id&&(0,t.jsxs)("div",{className:"p-4 border-t border-[#1e3a5f] bg-[#0a1929] animate-fade-in",children:["compress"===s.id&&(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"text-xs text-[#64748b] mb-2 block",children:"Aggressiveness"}),(0,t.jsx)("div",{className:"flex gap-2",children:["low","medium","high"].map(e=>(0,t.jsx)("button",{onClick:()=>w(e),className:`flex-1 py-2 rounded-lg text-sm capitalize ${f===e?"bg-[#4ECDC4] text-[#0a1929]":"bg-[#0f2137] text-[#94a3b8] border border-[#1e3a5f]"}`,children:e},e))})]}),"cost"===s.id&&(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"text-xs text-[#64748b] mb-2 block",children:"Model"}),(0,t.jsx)("select",{value:i,onChange:e=>r(e.target.value),className:"w-full bg-[#0f2137] border border-[#1e3a5f] rounded-lg px-3 py-2 text-sm text-white",children:j.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.name," - $",e.inputPricePerMillion,"/1M"]},e.id))})]}),"format"===s.id&&(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"text-xs text-[#64748b] mb-2 block",children:"Output Format"}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-2",children:[{id:"standard",label:"Standard"},{id:"excel",label:"Excel Table"},{id:"slides",label:"Slide Bullets"},{id:"memo",label:"Memo Format"}].map(e=>(0,t.jsx)("button",{onClick:()=>k(e.id),className:`py-2 rounded-lg text-sm ${C===e.id?"bg-[#4ECDC4] text-[#0a1929]":"bg-[#0f2137] text-[#94a3b8] border border-[#1e3a5f]"}`,children:e.label},e.id))})]}),(0,t.jsxs)("button",{onClick:()=>(s=>{switch(s){case"variables":{let s=v(e);S((0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("p",{className:"text-sm text-[#94a3b8]",children:["Found ",s.length," variables:"]}),s.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)("code",{className:"px-2 py-1 bg-[rgba(78,205,196,0.2)] text-[#4ECDC4] rounded",children:`{{${e.name}}}`}),e.defaultValue&&(0,t.jsxs)("span",{className:"text-[#64748b]",children:["default: ",e.defaultValue]}),e.type&&(0,t.jsxs)("span",{className:"text-[#64748b]",children:["type: ",e.type]})]},e.name))]}));break}case"compress":{let s=d(e,{aggressiveness:f});a(s.compressed),S((0,t.jsx)("div",{className:"space-y-3",children:(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-xl font-bold text-white tabular-nums",children:s.originalTokens}),(0,t.jsx)("div",{className:"text-xs text-[#64748b]",children:"Original"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-xl font-bold text-[#4ECDC4] tabular-nums",children:s.compressedTokens}),(0,t.jsx)("div",{className:"text-xs text-[#64748b]",children:"Compressed"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"text-xl font-bold text-[#059669] tabular-nums",children:[s.savings,"%"]}),(0,t.jsx)("div",{className:"text-xs text-[#64748b]",children:"Saved"})]})]})}));break}case"security":{let s=p(e),{redacted:i}=u(e),n=g(e);a(i),S((0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-sm text-[#94a3b8]",children:"PII: "}),(0,t.jsxs)("span",{className:`font-bold ${s.length?"text-[#dc2626]":"text-[#059669]"}`,children:[s.length," found"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-sm text-[#94a3b8]",children:"Risk: "}),(0,t.jsx)("span",{className:`font-bold capitalize ${"none"===n?"text-[#059669]":"low"===n?"text-[#4ECDC4]":"text-[#dc2626]"}`,children:n})]})]}),(0,t.jsx)("p",{className:"text-sm text-[#059669]",children:"Prompt has been redacted."})]}));break}case"cost":{let s=N(e,500,i);S((0,t.jsx)("div",{className:"space-y-3",children:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-xl font-bold text-[#4ECDC4] tabular-nums",children:s.inputTokens}),(0,t.jsx)("div",{className:"text-xs text-[#64748b]",children:"Input Tokens"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"text-xl font-bold text-white tabular-nums",children:["$",s.totalCost.toFixed(4)]}),(0,t.jsx)("div",{className:"text-xs text-[#64748b]",children:"Per Request"})]})]})}));break}case"format":{let s="";switch(C){case"excel":s="\n\n=== OUTPUT FORMAT: EXCEL ===\nPlease format all output as:\n- Tabular data with clear headers\n- Currency values: $X,XXX.XX\n- Percentages: X.X%\n- Dates: YYYY-MM-DD";break;case"slides":s="\n\n=== OUTPUT FORMAT: SLIDES ===\nPlease format all output as:\n- Bullet points (max 5 per section)\n- Clear section headers\n- Key metrics highlighted\n- Executive summary first";break;case"memo":s="\n\n=== OUTPUT FORMAT: MEMO ===\nPlease structure as:\n- Executive Summary\n- Key Findings\n- Detailed Analysis\n- Recommendations\n- Appendix"}s&&!e.includes("OUTPUT FORMAT")&&a(e+s),S((0,t.jsx)("div",{className:"text-sm text-[#059669]",children:"Output format instructions added to prompt."}))}}})(s.id),className:"btn-primary w-full py-2 text-sm",disabled:!e,children:["Run ",s.name]}),E&&h===s.id&&(0,t.jsx)("div",{className:"mt-4 p-3 bg-[#0f2137] rounded-lg border border-[#1e3a5f]",children:E})]})]},s.id)})}),(0,t.jsxs)("div",{className:"card p-4 bg-[rgba(78,205,196,0.1)] border-[rgba(78,205,196,0.2)]",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-[#4ECDC4] mb-2",children:[(0,t.jsx)(n.Icons.lightbulb,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"Finance Pro Tip"})]}),(0,t.jsx)("p",{className:"text-xs text-[#94a3b8]",children:"Use the Format tool to add Excel-ready or slide-friendly output instructions. Enable Audit Mode for compliance tracking in regulated environments."})]})]}),(0,t.jsx)(y,{isOpen:showAgentHelper,onClose:()=>setShowAgentHelper(!1),currentPrompt:e})]})}e.s(["default",()=>S],49785)}]);