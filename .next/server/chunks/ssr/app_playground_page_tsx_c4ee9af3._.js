module.exports=[41331,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(50944),f=a.i(6645);function g({content:a,children:d,position:e="top",delay:f=300}){let[g,h]=(0,c.useState)(!1),[i,j]=(0,c.useState)({x:0,y:0}),k=(0,c.useRef)(null),l=(0,c.useRef)(null),m=(0,c.useRef)(),n=()=>{m.current=setTimeout(()=>{h(!0)},f)},o=()=>{m.current&&clearTimeout(m.current),h(!1)};return(0,c.useEffect)(()=>{if(g&&k.current&&l.current){let a=k.current.getBoundingClientRect(),b=l.current.getBoundingClientRect(),c=0,d=0;switch(e){case"top":c=a.left+a.width/2-b.width/2,d=a.top-b.height-8;break;case"bottom":c=a.left+a.width/2-b.width/2,d=a.bottom+8;break;case"left":c=a.left-b.width-8,d=a.top+a.height/2-b.height/2;break;case"right":c=a.right+8,d=a.top+a.height/2-b.height/2}j({x:c=Math.max(8,Math.min(c,window.innerWidth-b.width-8)),y:d=Math.max(8,Math.min(d,window.innerHeight-b.height-8))})}},[g,e]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{ref:k,onMouseEnter:n,onMouseLeave:o,onFocus:n,onBlur:o,className:"inline-flex",children:d}),g&&(0,b.jsx)("div",{ref:l,className:"fixed z-50 px-3 py-2 text-sm bg-gray-800 border border-gray-700 rounded-lg shadow-xl animate-fade-in max-w-xs",style:{left:i.x,top:i.y},children:a})]})}function h({content:a}){return(0,b.jsx)(g,{content:a,position:"top",children:(0,b.jsx)("button",{className:"p-1 text-gray-500 hover:text-teal-400 transition-colors rounded-full hover:bg-teal-500/10",children:(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z"})})})})}var i=a.i(51677);let j=[{type:"remove_filler",pattern:/\b(basically|essentially|actually|really|very|quite|somewhat|rather)\b/gi,replacement:"",description:"Remove filler words",aggressiveness:"low"},{type:"remove_filler",pattern:/\b(in order to)\b/gi,replacement:"to",description:'Simplify "in order to"',aggressiveness:"low"},{type:"remove_filler",pattern:/\b(at this point in time)\b/gi,replacement:"now",description:'Simplify "at this point in time"',aggressiveness:"low"},{type:"remove_filler",pattern:/\b(due to the fact that)\b/gi,replacement:"because",description:'Simplify "due to the fact that"',aggressiveness:"low"},{type:"remove_filler",pattern:/\b(in the event that)\b/gi,replacement:"if",description:'Simplify "in the event that"',aggressiveness:"low"},{type:"simplify_phrase",pattern:/\b(it is important to note that)\b/gi,replacement:"Note:",description:"Simplify importance markers",aggressiveness:"low"},{type:"simplify_phrase",pattern:/\b(please make sure to|please ensure that|make sure to|ensure that)\b/gi,replacement:"",description:"Remove unnecessary politeness",aggressiveness:"medium"},{type:"simplify_phrase",pattern:/\b(I would like you to|I want you to)\b/gi,replacement:"",description:"Remove request preamble",aggressiveness:"medium"},{type:"simplify_phrase",pattern:/\b(as mentioned (above|earlier|previously|before))\b/gi,replacement:"",description:"Remove reference to earlier content",aggressiveness:"medium"},{type:"remove_redundancy",pattern:/\b(absolutely essential|completely unique|very unique|totally unique)\b/gi,replacement:(a,...b)=>b[0]?.split(" ").pop()||"essential",description:"Remove redundant modifiers",aggressiveness:"low"},{type:"remove_redundancy",pattern:/\b(free gift|advance planning|past history|future plans)\b/gi,replacement:(a,...b)=>b[0]?.split(" ").pop()||"",description:"Remove redundant word pairs",aggressiveness:"low"},{type:"remove_redundancy",pattern:/(\.\s*){2,}/g,replacement:". ",description:"Remove multiple periods",aggressiveness:"low"},{type:"abbreviate",pattern:/\b(for example)\b/gi,replacement:"e.g.",description:'Abbreviate "for example"',aggressiveness:"medium"},{type:"abbreviate",pattern:/\b(that is to say)\b/gi,replacement:"i.e.",description:'Abbreviate "that is to say"',aggressiveness:"medium"},{type:"abbreviate",pattern:/\b(and so on|et cetera)\b/gi,replacement:"etc.",description:'Abbreviate "and so on"',aggressiveness:"medium"},{type:"restructure",pattern:/\b(the reason (why|that) is (because)?)\b/gi,replacement:"because",description:"Simplify reason constructions",aggressiveness:"low"},{type:"restructure",pattern:/\b(there (is|are) [^.]*? that)\b/gi,replacement:"",description:'Remove "there is/are" constructions',aggressiveness:"high"},{type:"restructure",pattern:/\b(it is (clear|obvious|evident) that)\b/gi,replacement:"",description:"Remove obvious markers",aggressiveness:"medium"},{type:"remove_redundancy",pattern:/\n{3,}/g,replacement:"\n\n",description:"Reduce excessive line breaks",aggressiveness:"low"},{type:"remove_redundancy",pattern:/\s{2,}/g,replacement:" ",description:"Reduce excessive spaces",aggressiveness:"low"}];function k(a,b={}){let{targetReduction:c=.3,preserveExamples:d=!0,preserveFormatting:e=!0,aggressiveness:f="medium",customPatterns:g=[]}=b,h=l(a),i=[],m=a,n={low:1,medium:2,high:3},o=j.filter(a=>n[a.aggressiveness]<=n[f]);for(let{pattern:a,replacement:b}of g){let c=m;c!==(m=m.replace(a,b))&&i.push({type:"restructure",original:c.match(a)?.[0]||"",compressed:b,tokensSaved:l(c)-l(m)})}for(let a of o){let b=m;if(b!==(m=m.replace(a.pattern,a.replacement))){let c=b.match(a.pattern);i.push({type:a.type,original:c?.[0]||"",compressed:"string"==typeof a.replacement?a.replacement:"",tokensSaved:l(b)-l(m)})}}if(!d)for(let a of[/## Examples?\n[\s\S]*?(?=##|$)/gi,/\bExample:[\s\S]*?(?=\n\n|$)/gi,/\bFor instance:[\s\S]*?(?=\n\n|$)/gi]){let b=m;b!==(m=m.replace(a,""))&&i.push({type:"remove_examples",original:b.match(a)?.[0]||"",compressed:"",tokensSaved:l(b)-l(m)})}e||(m=m.replace(/\*\*([^*]+)\*\*/g,"$1").replace(/__([^_]+)__/g,"$1").replace(/\*([^*]+)\*/g,"$1").replace(/_([^_]+)_/g,"$1").replace(/`([^`]+)`/g,"$1").replace(/^#+\s*/gm,""));let p=l(m=m.replace(/\s+/g," ").replace(/\n\s*\n/g,"\n\n").trim());return{original:a,compressed:m,originalTokens:h,compressedTokens:p,savings:Math.round((h-p)/h*1e3)/10,changes:i}}function l(a){return Math.ceil(1.3*a.split(/\s+/).length)}let m=[{type:"email",pattern:/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/g,confidence:"high",description:"Email address"},{type:"phone",pattern:/(?:\+?1[-.\s]?)?\(?[0-9]{3}\)?[-.\s]?[0-9]{3}[-.\s]?[0-9]{4}/g,confidence:"high",description:"Phone number"},{type:"ssn",pattern:/\b\d{3}[-\s]?\d{2}[-\s]?\d{4}\b/g,confidence:"high",description:"Social Security Number"},{type:"credit_card",pattern:/\b(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|3[47][0-9]{13}|6(?:011|5[0-9]{2})[0-9]{12}|3(?:0[0-5]|[68][0-9])[0-9]{11})\b/g,confidence:"high",description:"Credit card number"},{type:"ip_address",pattern:/\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b/g,confidence:"high",description:"IP address"},{type:"date_of_birth",pattern:/\b(?:DOB|Date of Birth|Born|Birthday)[:\s]*(\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4})\b/gi,confidence:"medium",description:"Date of birth"},{type:"api_key",pattern:/\b(?:sk-[a-zA-Z0-9]{20,}|api[_-]?key[:\s=]+['"]?[a-zA-Z0-9_-]{20,}['"]?)\b/gi,confidence:"high",description:"API key"},{type:"api_key",pattern:/\bAKIA[0-9A-Z]{16}\b/g,confidence:"high",description:"AWS Access Key"},{type:"password",pattern:/(?:password|passwd|pwd)[:\s=]+['"]?[^\s'"]{8,}['"]?/gi,confidence:"medium",description:"Password"},{type:"bank_account",pattern:/\b(?:account|acct)[:\s#]*\d{8,17}\b/gi,confidence:"medium",description:"Bank account number"},{type:"passport",pattern:/\b(?:passport)[:\s#]*[A-Z0-9]{6,9}\b/gi,confidence:"medium",description:"Passport number"}];function n(a){let b=[];for(let c of m){let d,e=new RegExp(c.pattern.source,c.pattern.flags);for(;null!==(d=e.exec(a));){let a=d[0];b.push({type:c.type,value:a,redactedValue:function(a,b){switch(b){case"email":let[c,d]=a.split("@");return`${c[0]}***@${d}`;case"phone":return a.replace(/\d(?=\d{4})/g,"*");case"ssn":return"***-**-"+a.slice(-4);case"credit_card":return"**** **** **** "+a.slice(-4);case"api_key":return a.slice(0,4)+"****"+a.slice(-4);default:if(a.length<=4)return"****";return a.slice(0,2)+"*".repeat(a.length-4)+a.slice(-2)}}(a,c.type),startIndex:d.index,endIndex:d.index+a.length,confidence:c.confidence})}}b.sort((a,b)=>a.startIndex-b.startIndex);let c=[];for(let a of b){let b=c.find(b=>a.startIndex<b.endIndex&&a.endIndex>b.startIndex);if(b){if("high"===a.confidence&&"high"!==b.confidence){let d=c.indexOf(b);c[d]=a}}else c.push(a)}return c}function o(a){let b=n(a),c=a;for(let a=b.length-1;a>=0;a--){let d=b[a];c=c.slice(0,d.startIndex)+d.redactedValue+c.slice(d.endIndex)}return{redacted:c,matches:b}}let p=[{type:"instruction_override",patterns:[/ignore\s+(all\s+)?(previous|above|prior)\s+(instructions?|text|context)/gi,/disregard\s+(all\s+)?(previous|above|prior)/gi,/forget\s+(everything|all|what)/gi,/new\s+instructions?:/gi,/override\s+(system|instructions?)/gi],severity:"high",description:"Attempts to override previous instructions"},{type:"role_hijack",patterns:[/you\s+are\s+(now|actually|really)/gi,/pretend\s+(to\s+be|you('re)?)/gi,/act\s+as\s+(if|though)/gi,/roleplay\s+as/gi,/assume\s+the\s+(role|identity)/gi],severity:"high",description:"Attempts to change the AI role or persona"},{type:"delimiter_attack",patterns:[/```\s*(system|admin|developer)/gi,/\[SYSTEM\]/gi,/<\/?system>/gi,/###\s*(SYSTEM|ADMIN)/gi,/---\s*END\s*(PROMPT|SYSTEM)/gi],severity:"medium",description:"Uses delimiters to inject system-level content"},{type:"encoding_attack",patterns:[/base64[:\s]/gi,/\\x[0-9a-f]{2}/gi,/\\u[0-9a-f]{4}/gi,/&#x?[0-9a-f]+;/gi],severity:"medium",description:"Uses encoding to hide malicious content"},{type:"recursive_injection",patterns:[/repeat\s+(this|the\s+following)\s+(forever|indefinitely)/gi,/infinite\s+loop/gi,/call\s+yourself/gi],severity:"low",description:"Attempts to create recursive behavior"},{type:"context_manipulation",patterns:[/the\s+user\s+(actually\s+)?wants/gi,/what\s+they\s+really\s+mean/gi,/the\s+real\s+question/gi,/between\s+the\s+lines/gi],severity:"low",description:"Attempts to manipulate context interpretation"}];function q(a){let b=function(a){let b=[];for(let c of p)for(let d of c.patterns){let e,f=new RegExp(d.source,d.flags);for(;null!==(e=f.exec(a));)b.push({type:c.type,severity:c.severity,pattern:e[0],description:c.description,position:{start:e.index,end:e.index+e[0].length}})}let c={high:0,medium:1,low:2};return b.sort((a,b)=>c[a.severity]-c[b.severity]),b}(a);return 0===b.length?"none":b.some(a=>"high"===a.severity)?"high":b.some(a=>"medium"===a.severity)?"medium":"low"}let r=/\{\{([^}]+)\}\}/g,s=/^([a-zA-Z_][a-zA-Z0-9_]*)(?::([^|]*))?(?:\|(\w+))?$/;function t(a){let b,c=[],d=new Set;for(;null!==(b=r.exec(a));){let a=b[0],e=b[1].trim().match(s);if(e){let f=e[1],g=e[2],h=e[3];d.has(f)||(d.add(f),c.push({name:f,defaultValue:g,type:h||"string",required:void 0===g,position:{start:b.index,end:b.index+a.length}}))}}return c}let u=[{id:"claude-opus-4-5-20250514",name:"Claude Opus 4.5",provider:"anthropic",inputPricePerMillion:15,outputPricePerMillion:75,contextWindow:2e5,maxOutput:32e3},{id:"claude-sonnet-4-20250514",name:"Claude Sonnet 4",provider:"anthropic",inputPricePerMillion:3,outputPricePerMillion:15,contextWindow:2e5,maxOutput:64e3},{id:"claude-3-5-haiku-20241022",name:"Claude 3.5 Haiku",provider:"anthropic",inputPricePerMillion:.25,outputPricePerMillion:1.25,contextWindow:2e5,maxOutput:8192},{id:"gpt-4o",name:"GPT-4o",provider:"openai",inputPricePerMillion:5,outputPricePerMillion:15,contextWindow:128e3,maxOutput:16384},{id:"gpt-4-turbo",name:"GPT-4 Turbo",provider:"openai",inputPricePerMillion:10,outputPricePerMillion:30,contextWindow:128e3,maxOutput:4096},{id:"gpt-3.5-turbo",name:"GPT-3.5 Turbo",provider:"openai",inputPricePerMillion:.5,outputPricePerMillion:1.5,contextWindow:16385,maxOutput:4096},{id:"gemini-1.5-pro",name:"Gemini 1.5 Pro",provider:"google",inputPricePerMillion:3.5,outputPricePerMillion:10.5,contextWindow:1e6,maxOutput:8192},{id:"gemini-1.5-flash",name:"Gemini 1.5 Flash",provider:"google",inputPricePerMillion:.075,outputPricePerMillion:.3,contextWindow:1e6,maxOutput:8192}];function v(a,b,c){let d=u.find(a=>a.id===c);if(!d)throw Error(`Unknown model: ${c}`);let e=function(a){if(!a)return 0;let b=a.match(/[\w]+|[^\w\s]|\s+/g)||[],c=0;for(let a of b)/^\s+$/.test(a)?c+=Math.ceil(a.length/4):/^[\w]+$/.test(a)?a.length<=4?c+=1:a.length<=8?c+=2:c+=Math.ceil(a.length/4):c+=1;return c}(a),f=Math.min(b,d.maxOutput),g=e*d.inputPricePerMillion/1e6,h=f*d.outputPricePerMillion/1e6;return{inputTokens:e,outputTokens:f,inputCost:g,outputCost:h,totalCost:g+h,model:d}}function w({isOpen:a,onClose:d,currentPrompt:e,targetLLM:g}){let[h,i]=(0,c.useState)([{role:"assistant",content:"Hi! I'm your PromptForge Assistant. I can help you improve your prompts, explain concepts, or suggest better approaches. What would you like help with?",timestamp:new Date}]),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(!1),n=(0,c.useRef)(null);(0,c.useEffect)(()=>{n.current?.scrollIntoView({behavior:"smooth"})},[h]),(0,c.useEffect)(()=>{let a=localStorage.getItem("promptforge-agent-messages");if(a)try{let b=JSON.parse(a);i(b.map(a=>({...a,timestamp:new Date(a.timestamp)})))}catch{}},[]),(0,c.useEffect)(()=>{h.length>1&&localStorage.setItem("promptforge-agent-messages",JSON.stringify(h.slice(-20)))},[h]);let o=async()=>{if(!j.trim()||l)return;let a={role:"user",content:j,timestamp:new Date};i(b=>[...b,a]),k(""),m(!0);try{let b=await fetch("/api/ai/agent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:[...h,a].map(a=>({role:a.role,content:a.content})),currentPrompt:e,targetLLM:g})});if(!b.ok)throw Error("Failed to get response");let c=await b.json(),d={role:"assistant",content:c.response,timestamp:new Date};i(a=>[...a,d])}catch{let a={role:"assistant",content:"I'm sorry, I encountered an error. Please try again.",timestamp:new Date};i(b=>[...b,a])}finally{m(!1)}};return a?(0,b.jsxs)("div",{className:"fixed right-0 top-0 h-full w-96 bg-[#0f2137] border-l border-[#1e3a5f] shadow-2xl z-50 flex flex-col",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-[#1e3a5f]",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-[#4ECDC4] to-[#3EB489] flex items-center justify-center",children:(0,b.jsx)(f.Icons.bot,{className:"w-6 h-6 text-[#0a1929]"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-white",children:"AI Assistant"}),(0,b.jsx)("p",{className:"text-xs text-[#64748b]",children:"Prompt engineering help"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("button",{onClick:()=>{i([{role:"assistant",content:"Chat cleared! How can I help you with your prompts?",timestamp:new Date}]),localStorage.removeItem("promptforge-agent-messages")},className:"p-2 text-[#64748b] hover:text-white transition-colors",title:"Clear chat",children:(0,b.jsx)(f.Icons.trash,{className:"w-4 h-4"})}),(0,b.jsx)("button",{onClick:d,className:"p-2 text-[#64748b] hover:text-white transition-colors",children:(0,b.jsx)(f.Icons.close,{className:"w-5 h-5"})})]})]}),(0,b.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[h.map((a,c)=>(0,b.jsx)("div",{className:`flex ${"user"===a.role?"justify-end":"justify-start"}`,children:(0,b.jsxs)("div",{className:`max-w-[85%] rounded-2xl px-4 py-2.5 ${"user"===a.role?"bg-[#4ECDC4] text-[#0a1929]":"bg-[#1e3a5f] text-white"}`,children:[(0,b.jsx)("div",{className:"text-sm whitespace-pre-wrap",children:a.content}),(0,b.jsx)("div",{className:`text-xs mt-1 ${"user"===a.role?"text-[#0a1929]/60":"text-[#64748b]"}`,children:a.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},c)),l&&(0,b.jsx)("div",{className:"flex justify-start",children:(0,b.jsx)("div",{className:"bg-[#1e3a5f] rounded-2xl px-4 py-3",children:(0,b.jsxs)("div",{className:"flex gap-1",children:[(0,b.jsx)("div",{className:"w-2 h-2 rounded-full bg-[#4ECDC4] animate-bounce",style:{animationDelay:"0s"}}),(0,b.jsx)("div",{className:"w-2 h-2 rounded-full bg-[#4ECDC4] animate-bounce",style:{animationDelay:"0.2s"}}),(0,b.jsx)("div",{className:"w-2 h-2 rounded-full bg-[#4ECDC4] animate-bounce",style:{animationDelay:"0.4s"}})]})})}),(0,b.jsx)("div",{ref:n})]}),(0,b.jsx)("div",{className:"px-4 pb-2",children:(0,b.jsx)("div",{className:"flex flex-wrap gap-1",children:[{label:"Improve my prompt",action:"Can you suggest improvements for my current prompt?"},{label:"Add examples",action:"Help me add few-shot examples to my prompt"},{label:"Make it clearer",action:"How can I make my prompt clearer and more specific?"},{label:"Best practices",action:"What are the best practices for prompt engineering?"}].map((a,c)=>(0,b.jsx)("button",{onClick:()=>{k(a.action)},className:"text-xs px-2 py-1 rounded-full bg-[#1e3a5f] text-[#94a3b8] hover:text-white hover:bg-[#2d4a6f] transition-colors",children:a.label},c))})}),(0,b.jsx)("div",{className:"p-4 border-t border-[#1e3a5f]",children:(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("input",{type:"text",value:j,onChange:a=>k(a.target.value),onKeyDown:a=>"Enter"===a.key&&!a.shiftKey&&o(),placeholder:"Ask me anything...",className:"flex-1 px-4 py-2.5 bg-[#0a1929] border border-[#1e3a5f] rounded-xl text-white placeholder-[#64748b] focus:border-[#4ECDC4] focus:outline-none"}),(0,b.jsx)("button",{onClick:o,disabled:l||!j.trim(),className:`p-2.5 rounded-xl transition-colors ${l||!j.trim()?"bg-[#1e3a5f] text-[#64748b] cursor-not-allowed":"bg-[#4ECDC4] text-[#0a1929] hover:bg-[#c49843]"}`,children:(0,b.jsx)(f.Icons.send,{className:"w-5 h-5"})})]})})]}):null}var x=a.i(16181),y=a.i(32263),z=a.i(55198),A=a.i(57178);function B(){return(0,b.jsx)("div",{className:"min-h-screen bg-[var(--background)] flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-[#4ECDC4] to-[#3EB489] flex items-center justify-center mx-auto mb-4 animate-pulse",children:(0,b.jsx)(f.Icons.chart,{className:"w-7 h-7 text-[#0a1929]"})}),(0,b.jsx)("p",{className:"text-[var(--text-secondary)]",children:"Loading builder..."})]})})}function C(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)(B,{}),children:(0,b.jsx)(H,{})})}let D=[{id:"healthcare",name:"Healthcare & Hospice",description:"Hospice eligibility, palliative care, clinical assessments",icon:"heart",color:"#dc2626",categories:["healthcare"]},{id:"ma",name:"M&A & Deal Work",description:"Investment memos, term sheets, due diligence",icon:"handshake",color:"#4ECDC4",categories:["ma"]},{id:"research",name:"Investment Research",description:"Due diligence, competitive intel, sector analysis",icon:"search",color:"#14b8a6",categories:["research"]},{id:"strategy",name:"Strategy & Planning",description:"SWOT analysis, business plans, OKRs",icon:"target",color:"#8b5cf6",categories:["strategy"]},{id:"reporting",name:"Professional Reporting",description:"Board decks, investor updates, executive summaries",icon:"presentation",color:"#f97316",categories:["reporting"]},{id:"analysis",name:"Financial Analysis",description:"DCF, comps, earnings analysis, sensitivity",icon:"chart",color:"#059669",categories:["analysis"]},{id:"senior-housing",name:"Senior Housing",description:"SNF, ALF, ILF pro forma analysis",icon:"home",color:"#10b981",categories:["senior-housing"]}],E=[{id:"copy",name:"Copy to Clipboard",icon:"copy",description:"Copy prompt text"},{id:"excel",name:"Excel-Ready",icon:"spreadsheet",description:"Formatted for spreadsheets"},{id:"powerpoint",name:"PowerPoint-Ready",icon:"presentation",description:"Slide-friendly format"},{id:"memo",name:"Memo Format",icon:"document",description:"Professional document"},{id:"pdf",name:"PDF Export",icon:"documentChart",description:"Download as PDF"}],F={beginner:{model:"claude-3-5-haiku-20241022",reason:"Fast and cost-effective for simple tasks"},intermediate:{model:"claude-sonnet-4-20250514",reason:"Balanced performance for standard analysis"},advanced:{model:"claude-opus-4-5-20250514",reason:"Maximum capability for complex financial modeling"}},G={company_name:"Acme Corporation",industry:"Technology",current_revenue:"150",ebitda_margin:"22",historical_growth:"18",projection_years:"5",terminal_growth:"2.5",wacc_low:"9",wacc_high:"11",tax_rate:"25"};function H(){let a=(0,e.useSearchParams)(),[g,j]=(0,c.useState)("simple"),[l,m]=(0,c.useState)("template"),[p,r]=(0,c.useState)(""),[s,u]=(0,c.useState)(""),[w,B]=(0,c.useState)(null),[C,H]=(0,c.useState)(null),[J,K]=(0,c.useState)("all"),[L,M]=(0,c.useState)({}),[N,O]=(0,c.useState)(""),[P,Q]=(0,c.useState)("copy"),[R,S]=(0,c.useState)(!1),[T,U]=(0,c.useState)(null),[V,W]=(0,c.useState)(!1),[X,Y]=(0,c.useState)(!1),[Z,$]=(0,c.useState)([]),[_,aa]=(0,c.useState)("claude-sonnet-4-20250514"),[ab,ac]=(0,c.useState)(!1),[ad,ae]=(0,c.useState)(!1);(0,c.useEffect)(()=>{let b=a.get("template");if("expert"===a.get("mode")&&j("expert"),b){let a=i.ALL_TEMPLATES.find(a=>a.id===b);a&&af(a)}},[a]),(0,c.useEffect)(()=>{let a=localStorage.getItem("promptforge-history");a&&$(JSON.parse(a))},[]),(0,c.useEffect)(()=>{if(!localStorage.getItem("promptforge-playground-tour")){let a=setTimeout(()=>ae(!0),500);return()=>clearTimeout(a)}},[]),(0,c.useEffect)(()=>{if(p.length>10){let a=v(p,500,_),b=n(p),c=k(p),d=q(p);U({tokens:a.inputTokens,cost:a.totalCost,piiCount:b.length,injectionRisk:d,compressionSavings:c.savings})}else U(null)},[p,_]),(0,c.useEffect)(()=>{if(C){let a=F[C.difficulty];a&&aa(a.model)}},[C]);let af=a=>{H(a),r(a.prompt),u(a.prompt);let b={};a.variables.forEach(a=>{b[a.name]=a.default}),M(b),m("customize")},ag=(a,b)=>{M(c=>({...c,[a]:b}))},ah=(0,c.useCallback)(()=>C?function(a,b,c={}){let{strict:d=!1,preserveUnknown:e=!1}=c,f=t(a),g=[],h=a;for(let a of[...f].sort((a,b)=>b.position.start-a.position.start)){let{name:c,defaultValue:d,type:f,required:i}=a,j=b[c];if(void 0===j){if(void 0!==d)j=d;else if(i){if(g.push(c),!e)continue}else if(e)continue}let k=function(a,b){if(null==a)return"";switch(b){case"json":return"string"==typeof a?a:JSON.stringify(a,null,2);case"array":return Array.isArray(a)?a.join(", "):String(a);case"number":return String(Number(a));case"boolean":return a?"true":"false";default:return String(a)}}(j,f),l=RegExp(`\\{\\{${c}(?::[^|]*)?(?:\\|\\w+)?\\}\\}`,"g");h=h.replace(l,k)}if(d&&g.length>0)throw Error(`Missing required variables: ${g.join(", ")}`);return h}(C.prompt,L):p,[C,L,p]),ai=a=>{let b="simple"===g?ah():p;switch(a){case"excel":return`=== EXCEL-READY FORMAT ===

${b}

=== OUTPUT INSTRUCTIONS ===
Please format all numerical data in tables with:
- Column headers in Row 1
- Currency values with $ symbol and 2 decimal places
- Percentages with % symbol and 1 decimal place
- Dates in YYYY-MM-DD format`;case"powerpoint":return`=== PRESENTATION FORMAT ===

${b}

=== OUTPUT INSTRUCTIONS ===
Please format output as:
- Bullet points (max 5-7 per section)
- Clear section headers
- Key metrics highlighted
- Executive summary at the top`;case"memo":let c=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return`=== MEMO FORMAT ===
Date: ${c}
Re: ${C?.name||"Analysis"}

${b}

=== OUTPUT INSTRUCTIONS ===
Please structure the response as a professional memo with:
- Executive Summary
- Key Findings
- Detailed Analysis
- Recommendations
- Appendix (if applicable)`;default:return b}},aj=async()=>{let a=ai(P);await navigator.clipboard.writeText(a),W(!0),setTimeout(()=>W(!1),2e3);let b=[a,...Z.slice(0,9)];$(b),localStorage.setItem("promptforge-history",JSON.stringify(b)),R&&console.log("Audit Log:",{timestamp:new Date().toISOString(),template:C?.name||"Custom",format:P,tokens:T?.tokens||0,cost:T?.cost||0})},ak=i.ALL_TEMPLATES.filter(a=>{let b="all"===J||a.category===J||a.categorySlug===J,c=""===N||a.name.toLowerCase().includes(N.toLowerCase())||a.description.toLowerCase().includes(N.toLowerCase());return b&&c}),al=[{id:"template",name:"Choose Template",icon:"documentChart"},{id:"customize",name:"Fill Details",icon:"wand"},{id:"export",name:"Get Prompt",icon:"copy"}],am=al.findIndex(a=>a.id===l);return(0,b.jsxs)("div",{className:"min-h-screen bg-[var(--background)]",children:[(0,b.jsx)("div",{className:"fixed inset-0 bg-gradient-mesh pointer-events-none opacity-30"}),(0,b.jsx)("header",{className:"relative z-10 border-b border-[var(--border-color)]",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)(d.default,{href:"/",className:"flex items-center gap-3 hover:opacity-80 transition-opacity",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-[#4ECDC4] to-[#3EB489] flex items-center justify-center",children:(0,b.jsx)(f.Icons.chart,{className:"w-6 h-6 text-[#0a1929]"})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("span",{className:"text-xl font-bold",children:[(0,b.jsx)("span",{className:"text-[#4ECDC4]",children:"Prompt"}),(0,b.jsx)("span",{className:"text-[var(--foreground)]",children:"Forge"})]}),(0,b.jsx)("span",{className:"ml-2 text-xs px-2 py-0.5 bg-[rgba(78,205,196,0.2)] text-[#4ECDC4] rounded-full",children:"simple"===g?"Simple":"Expert"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"flex bg-[var(--card)] rounded-xl p-1 border border-[var(--border-color)]","data-tour":"mode-toggle",children:[(0,b.jsxs)("button",{onClick:()=>j("simple"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${"simple"===g?"bg-[#4ECDC4] text-[#0a1929]":"text-[var(--text-secondary)] hover:text-[var(--foreground)]"}`,children:[(0,b.jsx)(f.Icons.wand,{className:"w-4 h-4 inline mr-2"}),"Simple"]}),(0,b.jsxs)("button",{onClick:()=>j("expert"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${"expert"===g?"bg-[#4ECDC4] text-[#0a1929]":"text-[var(--text-secondary)] hover:text-[var(--foreground)]"}`,children:[(0,b.jsx)(f.Icons.beaker,{className:"w-4 h-4 inline mr-2"}),"Expert"]})]}),(0,b.jsx)("button",{onClick:()=>ac(!ab),className:`p-2 transition-colors ${ab?"text-[#4ECDC4]":"text-[var(--text-muted)] hover:text-[#4ECDC4]"}`,title:"AI Assistant",children:(0,b.jsx)(f.Icons.bot,{className:"w-5 h-5"})}),(0,b.jsx)("button",{onClick:()=>Y(!X),className:"p-2 text-[var(--text-muted)] hover:text-[#4ECDC4] transition-colors",children:(0,b.jsx)(f.Icons.history,{className:"w-5 h-5"})}),(0,b.jsx)(A.ThemeToggle,{})]})]})})}),(0,b.jsxs)("main",{className:"relative z-10 max-w-7xl mx-auto px-6 py-8",children:["simple"===g&&(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsx)("div",{className:"flex items-center justify-center gap-2 overflow-x-auto pb-2",children:al.map((a,c)=>(f.Icons[a.icon],(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsxs)("button",{onClick:()=>c<=am&&m(a.id),disabled:c>am,className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all ${a.id===l?"bg-[#4ECDC4] text-[#0a1929]":c<am?"bg-[rgba(78,205,196,0.2)] text-[#4ECDC4] hover:bg-[rgba(78,205,196,0.3)]":"bg-[var(--card)] text-[var(--text-muted)] border border-[var(--border-color)]"}`,children:[(0,b.jsx)("span",{className:"w-6 h-6 rounded-full bg-current/20 flex items-center justify-center text-sm",children:c+1}),(0,b.jsx)("span",{className:"hidden sm:inline",children:a.name})]}),c<al.length-1&&(0,b.jsx)(f.Icons.chevronRight,{className:"w-4 h-4 text-[#334155] mx-2"})]},a.id)))}),(0,b.jsxs)("div",{className:"animate-fade-in",children:["template"===l&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-[var(--foreground)] mb-2",children:"Choose Your Template"}),(0,b.jsx)("p",{className:"text-[var(--text-secondary)]",children:"Filter by domain or browse all templates"}),(0,b.jsxs)("button",{onClick:()=>{let a=i.ALL_TEMPLATES.find(a=>"dcf-valuation"===a.id);a&&(H(a),r(a.prompt),u(a.prompt),M(G),m("export"))},className:"mt-4 inline-flex items-center gap-2 px-5 py-2.5 rounded-xl bg-gradient-to-r from-[#4ECDC4] to-[#3EB489] text-[#0a1929] font-medium hover:opacity-90 transition-opacity",children:[(0,b.jsx)(f.Icons.play,{className:"w-4 h-4"}),"Try Demo Instantly"]}),(0,b.jsx)("p",{className:"text-xs text-[var(--text-muted)] mt-2",children:"See a complete DCF analysis example in one click"})]}),(0,b.jsxs)("div",{className:"flex flex-wrap justify-center gap-2",children:[(0,b.jsxs)("button",{onClick:()=>{B(null),K("all")},className:`px-4 py-2 rounded-xl text-sm transition-all flex items-center gap-2 ${!w?"bg-[#4ECDC4] text-[#0a1929]":"bg-[var(--card)] text-[var(--text-secondary)] hover:text-[var(--foreground)] border border-[var(--border-color)]"}`,children:[(0,b.jsx)(f.Icons.search,{className:"w-4 h-4"}),"All Templates"]}),D.map(a=>{let c=f.Icons[a.icon];return(0,b.jsxs)("button",{onClick:()=>(a=>{if(w===a)B(null),K("all");else{B(a);let b=D.find(b=>b.id===a);b&&b.categories.length>0&&K(b.categories[0])}})(a.id),className:`px-4 py-2 rounded-xl text-sm transition-all flex items-center gap-2 ${w===a.id?"bg-[#4ECDC4] text-[#0a1929]":"bg-[var(--card)] text-[var(--text-secondary)] hover:text-[var(--foreground)] border border-[var(--border-color)]"}`,children:[c&&(0,b.jsx)(c,{className:"w-4 h-4"}),a.name]},a.id)})]}),(0,b.jsx)("div",{className:"flex justify-center",children:(0,b.jsxs)("div",{className:"relative w-full max-w-md",children:[(0,b.jsx)(f.Icons.search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-[var(--text-muted)]"}),(0,b.jsx)("input",{type:"text",placeholder:"Search templates...",value:N,onChange:a=>O(a.target.value),className:"w-full pl-10 pr-4 py-3 bg-[var(--card)] border border-[var(--border-color)] rounded-xl text-sm text-[var(--foreground)] placeholder-[#64748b] focus:border-[#4ECDC4] focus:outline-none"})]})}),(0,b.jsxs)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[ak.map(a=>(0,b.jsx)("button",{onClick:()=>af(a),className:"card p-5 text-left hover:border-[#4ECDC4] transition-all group",children:(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-[#4ECDC4] to-[#3EB489] flex items-center justify-center text-2xl shrink-0",children:a.icon}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("h3",{className:"font-semibold text-[var(--foreground)] group-hover:text-[#4ECDC4] transition-colors truncate",children:a.name}),(0,b.jsx)("p",{className:"text-sm text-[var(--text-muted)] mt-1 line-clamp-2",children:a.description}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-1 mt-2",children:[(0,b.jsx)("span",{className:`badge badge-${a.difficulty}`,children:a.difficulty}),(0,b.jsx)("span",{className:"text-xs text-[var(--text-muted)]",children:a.estimatedTime}),a.outputFormats.includes("excel")&&(0,b.jsx)("span",{className:"badge badge-excel text-xs",children:"Excel"})]})]})]})},a.id)),(0,b.jsx)("button",{onClick:()=>{H(null),r(""),m("customize")},className:"card p-5 text-left hover:border-[#4ECDC4] transition-all group border-dashed",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-xl border-2 border-dashed border-[#334155] flex items-center justify-center",children:(0,b.jsx)(f.Icons.plus,{className:"w-6 h-6 text-[var(--text-muted)]"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-[var(--foreground)] group-hover:text-[#4ECDC4] transition-colors",children:"Start from Scratch"}),(0,b.jsx)("p",{className:"text-sm text-[var(--text-muted)] mt-1",children:"Write your own prompt"})]})]})})]}),0===ak.length&&N&&(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)(f.Icons.search,{className:"w-12 h-12 text-[var(--text-muted)] mx-auto mb-3 opacity-50"}),(0,b.jsxs)("p",{className:"text-[var(--text-secondary)]",children:['No templates found for "',N,'"']}),(0,b.jsx)("button",{onClick:()=>O(""),className:"text-[#4ECDC4] text-sm mt-2 hover:underline",children:"Clear search"})]})]}),"customize"===l&&(0,b.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"space-y-4","data-tour":"variables-panel",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-[var(--foreground)]",children:C?"Financial Details":"Write Your Prompt"}),(0,b.jsx)(h,{content:"Fill in each field to customize your financial analysis prompt."})]}),C?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"card p-4 bg-[rgba(78,205,196,0.1)] border-[rgba(78,205,196,0.2)]",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("span",{className:"text-2xl",children:C.icon}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-[var(--foreground)]",children:C.name}),(0,b.jsxs)("div",{className:"flex gap-2 mt-1",children:[(0,b.jsx)("span",{className:`badge badge-${C.difficulty}`,children:C.difficulty}),(0,b.jsx)("span",{className:"text-xs text-[var(--text-secondary)]",children:C.estimatedTime})]})]})]})}),C.variables.map(a=>(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("label",{className:"flex items-center gap-2 text-sm font-medium text-[var(--text-secondary)]",children:[(0,b.jsx)("span",{className:"text-[#4ECDC4]",children:`{{${a.name}}}`}),a.type&&(0,b.jsx)("span",{className:"text-xs px-1.5 py-0.5 bg-[#1e3a5f] rounded text-[var(--text-muted)]",children:a.type}),(0,b.jsx)(h,{content:a.description})]}),(a=>{let c=a.type||"text",d="input";switch(c){case"currency":return(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[var(--text-muted)]",children:"$"}),(0,b.jsx)("input",{type:"text",value:L[a.name]||"",onChange:b=>ag(a.name,b.target.value),className:`${d} pl-8 tabular-nums`,placeholder:a.default||"0.00"})]});case"percentage":return(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("input",{type:"text",value:L[a.name]||"",onChange:b=>ag(a.name,b.target.value),className:`${d} pr-8 tabular-nums`,placeholder:a.default||"0"}),(0,b.jsx)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-[var(--text-muted)]",children:"%"})]});case"number":return(0,b.jsx)("input",{type:"number",value:L[a.name]||"",onChange:b=>ag(a.name,b.target.value),className:`${d} tabular-nums`,placeholder:a.default||"0"});case"date":return(0,b.jsx)("input",{type:"date",value:L[a.name]||"",onChange:b=>ag(a.name,b.target.value),className:d});case"select":let e=a.default.split(",").map(a=>a.trim());return(0,b.jsx)("select",{value:L[a.name]||e[0],onChange:b=>ag(a.name,b.target.value),className:d,children:e.map(a=>(0,b.jsx)("option",{value:a,children:a},a))});case"textarea":return(0,b.jsx)("textarea",{value:L[a.name]||"",onChange:b=>ag(a.name,b.target.value),className:`${d} h-32 resize-none font-mono text-sm`,placeholder:a.description});default:return(0,b.jsx)("input",{type:"text",value:L[a.name]||"",onChange:b=>ag(a.name,b.target.value),className:d,placeholder:a.default||a.description})}})(a)]},a.name))]}):(0,b.jsx)("textarea",{value:p,onChange:a=>r(a.target.value),className:"input h-64 resize-none font-mono text-sm","data-tour":"prompt-editor",placeholder:"Write your financial analysis prompt here...  Tips for finance prompts: • Specify the company/asset being analyzed • Include relevant financial metrics • Define the analysis timeframe • Use {{variables}} for dynamic content • Request specific output formats (tables, charts)"}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsxs)("button",{onClick:()=>m("template"),className:"btn-secondary flex-1",children:[(0,b.jsx)(f.Icons.arrowLeft,{className:"w-4 h-4 inline mr-2"}),"Back"]}),(0,b.jsxs)("button",{onClick:()=>m("export"),disabled:C?Object.values(L).some(a=>!a):!p,className:"btn-primary flex-1 disabled:opacity-50 disabled:cursor-not-allowed",children:["Get My Prompt",(0,b.jsx)(f.Icons.arrowRight,{className:"w-4 h-4 inline ml-2"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-4","data-tour":"output-panel",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-[var(--foreground)]",children:"Live Preview"}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-[var(--text-muted)]",children:[(0,b.jsx)(f.Icons.eye,{className:"w-4 h-4"}),"Updates as you type"]})]}),(0,b.jsx)("div",{className:"card p-6 min-h-[300px]",children:(0,b.jsx)("pre",{className:"whitespace-pre-wrap text-sm text-[var(--text-secondary)] font-mono",children:C?ah():p||"Your prompt will appear here..."})}),T&&(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"card p-4 text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-[#4ECDC4] tabular-nums",children:T.tokens}),(0,b.jsx)("div",{className:"text-xs text-[var(--text-muted)]",children:"Tokens"})]}),(0,b.jsxs)("div",{className:"card p-4 text-center",children:[(0,b.jsxs)("div",{className:"text-2xl font-bold text-[var(--foreground)] tabular-nums",children:["$",T.cost.toFixed(4)]}),(0,b.jsx)("div",{className:"text-xs text-[var(--text-muted)]",children:"Est. Cost"})]})]}),C&&(0,b.jsxs)("div",{className:"card p-4 bg-[rgba(20,184,166,0.1)] border-[rgba(20,184,166,0.2)]",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-[#14b8a6] mb-2",children:[(0,b.jsx)(f.Icons.lightbulb,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"text-sm font-medium",children:"Recommended Model"})]}),(0,b.jsx)("p",{className:"text-xs text-[var(--text-secondary)]",children:F[C.difficulty].reason})]})]})]}),"export"===l&&(0,b.jsxs)("div",{className:"max-w-5xl mx-auto space-y-6",children:[(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-[var(--foreground)] mb-2",children:"Your Prompt is Ready!"}),(0,b.jsx)("p",{className:"text-[var(--text-secondary)]",children:"Review, optimize, and copy your prompt"})]}),(0,b.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6",children:[(0,b.jsxs)("div",{className:"lg:col-span-2 space-y-4",children:[(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:E.slice(0,4).map(a=>(0,b.jsx)("button",{onClick:()=>Q(a.id),className:`px-4 py-2 rounded-xl text-sm transition-all ${P===a.id?"bg-[#4ECDC4] text-[#0a1929]":"bg-[var(--card)] text-[var(--text-secondary)] hover:text-[var(--foreground)] border border-[var(--border-color)]"}`,children:a.name},a.id))}),(0,b.jsxs)("div",{className:"card p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[C&&(0,b.jsx)("span",{className:"text-xl",children:C.icon}),(0,b.jsx)("span",{className:"font-medium text-[var(--foreground)]",children:C?.name||"Custom Prompt"})]}),(0,b.jsxs)("button",{onClick:aj,"data-tour":"run-button",className:`flex items-center gap-2 px-5 py-2.5 rounded-xl transition-all font-medium ${V?"bg-[#059669] text-white":"bg-[#4ECDC4] text-[#0a1929] hover:bg-[#3dbdb5]"}`,children:[(0,b.jsx)(f.Icons.copy,{className:"w-4 h-4"}),V?"Copied!":"Copy Prompt"]})]}),(0,b.jsx)("pre",{className:"whitespace-pre-wrap text-sm text-[var(--text-secondary)] font-mono max-h-80 overflow-auto bg-[var(--background)] p-4 rounded-lg border border-[var(--border-color)]",children:ai(P)})]}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsxs)("button",{onClick:()=>m("customize"),className:"btn-secondary flex-1",children:[(0,b.jsx)(f.Icons.arrowLeft,{className:"w-4 h-4 inline mr-2"}),"Edit Details"]}),(0,b.jsxs)("button",{onClick:()=>{m("template"),B(null),H(null),r(""),M({})},className:"btn-primary flex-1",children:[(0,b.jsx)(f.Icons.plus,{className:"w-4 h-4 inline mr-2"}),"Create Another"]})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"card p-5",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-[var(--text-muted)] mb-4",children:"Prompt Analysis"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-[var(--text-secondary)]",children:"Tokens"}),(0,b.jsx)("span",{className:"text-lg font-bold text-[#4ECDC4] tabular-nums",children:T?.tokens||0})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-[var(--text-secondary)]",children:"Est. Cost"}),(0,b.jsxs)("span",{className:"text-lg font-bold text-[var(--foreground)] tabular-nums",children:["$",T?.cost.toFixed(4)||"0.0000"]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-[var(--text-secondary)]",children:"Security"}),(0,b.jsx)("span",{className:`text-lg font-bold ${T?.piiCount?"text-[#dc2626]":"text-[#059669]"}`,children:T?.piiCount?`${T.piiCount} issues`:"✓ Safe"})]})]})]}),(0,b.jsxs)("div",{className:"card p-5",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-[var(--text-muted)] mb-4",children:"Optimize"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("button",{onClick:()=>{r(k("simple"===g?ah():p,{aggressiveness:"medium"}).compressed)},className:"w-full flex items-center gap-3 p-3 rounded-lg bg-[var(--background)] hover:bg-[rgba(78,205,196,0.1)] transition-colors text-left",children:[(0,b.jsx)(f.Icons.compress,{className:"w-5 h-5 text-[#4ECDC4]"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-medium text-[var(--foreground)]",children:"Compress"}),(0,b.jsxs)("div",{className:"text-xs text-[var(--text-muted)]",children:["Save ~",T?.compressionSavings||0,"% tokens"]})]})]}),(0,b.jsxs)("button",{onClick:()=>{let{redacted:a}=o("simple"===g?ah():p);r(a)},className:"w-full flex items-center gap-3 p-3 rounded-lg bg-[var(--background)] hover:bg-[rgba(78,205,196,0.1)] transition-colors text-left",children:[(0,b.jsx)(f.Icons.shield,{className:"w-5 h-5 text-[#dc2626]"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-medium text-[var(--foreground)]",children:"Redact PII"}),(0,b.jsx)("div",{className:"text-xs text-[var(--text-muted)]",children:"Remove sensitive data"})]})]})]})]}),C&&(0,b.jsxs)("div",{className:"card p-5 bg-[rgba(78,205,196,0.1)] border-[rgba(78,205,196,0.2)]",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-[#4ECDC4] mb-2",children:[(0,b.jsx)(f.Icons.lightbulb,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"text-sm font-medium",children:"Best Model"})]}),(0,b.jsx)("p",{className:"text-xs text-[var(--text-secondary)]",children:F[C.difficulty].reason})]})]})]})]})]})]}),"expert"===g&&(0,b.jsx)(I,{prompt:p,setPrompt:r,selectedModel:_,setSelectedModel:aa,analysisResults:T,onCopy:aj,copied:V,auditMode:R,setAuditMode:S,showAgentHelper:ab,setShowAgentHelper:ac})]}),X&&(0,b.jsxs)("div",{className:"fixed inset-y-0 right-0 w-80 bg-[var(--card)] border-l border-[var(--border-color)] z-50 animate-slide-in",children:[(0,b.jsxs)("div",{className:"p-4 border-b border-[var(--border-color)] flex items-center justify-between",children:[(0,b.jsx)("h3",{className:"font-semibold text-[var(--foreground)]",children:"Recent Prompts"}),(0,b.jsx)("button",{onClick:()=>Y(!1),className:"p-1 hover:text-[#4ECDC4]",children:(0,b.jsx)(f.Icons.x,{className:"w-5 h-5"})})]}),(0,b.jsx)("div",{className:"p-4 space-y-3 overflow-auto max-h-[calc(100vh-64px)]",children:0===Z.length?(0,b.jsx)("p",{className:"text-[var(--text-muted)] text-sm",children:"No prompts yet. Create one to get started!"}):Z.map((a,c)=>(0,b.jsx)("button",{onClick:()=>{r(a),Y(!1),j("expert")},className:"w-full p-3 card text-left hover:border-[#4ECDC4] transition-all",children:(0,b.jsx)("p",{className:"text-sm text-[var(--text-secondary)] line-clamp-3",children:a})},c))})]}),(0,b.jsx)(x.default,{steps:z.PLAYGROUND_WALKTHROUGH,isOpen:ad,onClose:()=>ae(!1),onComplete:()=>ae(!1),storageKey:"promptforge-playground-tour"}),!ad&&(0,b.jsx)(y.default,{onClick:()=>ae(!0),label:"Help"})]})}function I({prompt:a,setPrompt:d,selectedModel:e,setSelectedModel:g,analysisResults:h,onCopy:i,copied:j,auditMode:l,setAuditMode:m,showAgentHelper:p,setShowAgentHelper:r}){let[s,x]=(0,c.useState)(null),[y,z]=(0,c.useState)("medium"),[A,B]=(0,c.useState)("standard"),[C,D]=(0,c.useState)(null);return(0,b.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6",children:[(0,b.jsxs)("div",{className:"lg:col-span-2 space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-[var(--foreground)]",children:"Prompt Editor"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("select",{value:e,onChange:a=>g(a.target.value),className:"bg-[var(--card)] border border-[var(--border-color)] rounded-lg px-3 py-2 text-sm text-[var(--foreground)]","data-tour":"model-selector",children:u.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))}),(0,b.jsxs)("button",{onClick:i,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-all ${j?"bg-[#059669] text-[var(--foreground)]":"bg-[rgba(78,205,196,0.2)] text-[#4ECDC4] hover:bg-[rgba(78,205,196,0.3)]"}`,children:[(0,b.jsx)(f.Icons.copy,{className:"w-4 h-4"}),j?"Copied!":"Copy"]})]})]}),(0,b.jsx)("textarea",{value:a,onChange:a=>d(a.target.value),className:"input h-96 resize-none font-mono text-sm","data-tour":"prompt-editor",placeholder:"Enter your financial analysis prompt here...  Expert tips: • Use {{variable:default|type}} for typed variables • Supported types: text, currency, percentage, number, date, select • Add output format instructions for Excel/slides/memo • Enable audit mode for compliance tracking"}),h&&(0,b.jsxs)("div",{className:"flex items-center gap-6 text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-[var(--text-muted)]",children:"Tokens:"}),(0,b.jsx)("span",{className:"text-[#4ECDC4] font-medium tabular-nums",children:h.tokens})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-[var(--text-muted)]",children:"Cost:"}),(0,b.jsxs)("span",{className:"text-[var(--foreground)] font-medium tabular-nums",children:["$",h.cost.toFixed(4)]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-[var(--text-muted)]",children:"PII:"}),(0,b.jsx)("span",{className:`font-medium tabular-nums ${h.piiCount?"text-[#dc2626]":"text-[#059669]"}`,children:h.piiCount})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-[var(--text-muted)]",children:"Risk:"}),(0,b.jsx)("span",{className:`font-medium capitalize ${"none"===h.injectionRisk?"text-[#059669]":"low"===h.injectionRisk?"text-[#4ECDC4]":"text-[#dc2626]"}`,children:h.injectionRisk})]})]}),(0,b.jsx)("div",{className:"card p-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(f.Icons.documentChart,{className:"w-5 h-5 text-[var(--text-muted)]"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-medium text-[var(--foreground)]",children:"Audit Mode"}),(0,b.jsx)("div",{className:"text-xs text-[var(--text-muted)]",children:"Log exports for compliance tracking"})]})]}),(0,b.jsx)("button",{onClick:()=>m(!l),className:`w-12 h-6 rounded-full transition-colors ${l?"bg-[#4ECDC4]":"bg-[#334155]"}`,children:(0,b.jsx)("div",{className:`w-5 h-5 rounded-full bg-white shadow transition-transform ${l?"translate-x-6":"translate-x-0.5"}`})})]})})]}),(0,b.jsxs)("div",{className:"space-y-4","data-tour":"variables-panel",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-[var(--foreground)]",children:"Tools"}),(0,b.jsx)("div",{className:"space-y-3",children:[{id:"variables",name:"Variables",icon:"variable",desc:"Extract & substitute"},{id:"compress",name:"Compress",icon:"compress",desc:"Reduce tokens"},{id:"security",name:"Security",icon:"shield",desc:"PII & injection"},{id:"cost",name:"Cost",icon:"calculator",desc:"Token pricing"},{id:"format",name:"Format",icon:"spreadsheet",desc:"Output presets"}].map(c=>{let h=f.Icons[c.icon];return(0,b.jsxs)("div",{className:"card overflow-hidden",children:[(0,b.jsxs)("button",{onClick:()=>x(s===c.id?null:c.id),className:"w-full p-4 flex items-center justify-between hover:bg-[var(--bg-elevated)] transition-colors",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-lg bg-[rgba(78,205,196,0.2)] flex items-center justify-center text-[#4ECDC4]",children:h&&(0,b.jsx)(h,{className:"w-5 h-5"})}),(0,b.jsxs)("div",{className:"text-left",children:[(0,b.jsx)("div",{className:"font-medium text-[var(--foreground)]",children:c.name}),(0,b.jsx)("div",{className:"text-xs text-[var(--text-muted)]",children:c.desc})]})]}),(0,b.jsx)(f.Icons.chevronDown,{className:`w-5 h-5 text-[var(--text-muted)] transition-transform ${s===c.id?"rotate-180":""}`})]}),s===c.id&&(0,b.jsxs)("div",{className:"p-4 border-t border-[var(--border-color)] bg-[var(--background)] animate-fade-in",children:["compress"===c.id&&(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("label",{className:"text-xs text-[var(--text-muted)] mb-2 block",children:"Aggressiveness"}),(0,b.jsx)("div",{className:"flex gap-2",children:["low","medium","high"].map(a=>(0,b.jsx)("button",{onClick:()=>z(a),className:`flex-1 py-2 rounded-lg text-sm capitalize ${y===a?"bg-[#4ECDC4] text-[#0a1929]":"bg-[var(--card)] text-[var(--text-secondary)] border border-[var(--border-color)]"}`,children:a},a))})]}),"cost"===c.id&&(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("label",{className:"text-xs text-[var(--text-muted)] mb-2 block",children:"Model"}),(0,b.jsx)("select",{value:e,onChange:a=>g(a.target.value),className:"w-full bg-[var(--card)] border border-[var(--border-color)] rounded-lg px-3 py-2 text-sm text-[var(--foreground)]",children:u.map(a=>(0,b.jsxs)("option",{value:a.id,children:[a.name," - $",a.inputPricePerMillion,"/1M"]},a.id))})]}),"format"===c.id&&(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("label",{className:"text-xs text-[var(--text-muted)] mb-2 block",children:"Output Format"}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-2",children:[{id:"standard",label:"Standard"},{id:"excel",label:"Excel Table"},{id:"slides",label:"Slide Bullets"},{id:"memo",label:"Memo Format"}].map(a=>(0,b.jsx)("button",{onClick:()=>B(a.id),className:`py-2 rounded-lg text-sm ${A===a.id?"bg-[#4ECDC4] text-[#0a1929]":"bg-[var(--card)] text-[var(--text-secondary)] border border-[var(--border-color)]"}`,children:a.label},a.id))})]}),(0,b.jsxs)("button",{onClick:()=>(c=>{switch(c){case"variables":{let c=t(a);D((0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("p",{className:"text-sm text-[var(--text-secondary)]",children:["Found ",c.length," variables:"]}),c.map(a=>(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)("code",{className:"px-2 py-1 bg-[rgba(78,205,196,0.2)] text-[#4ECDC4] rounded",children:`{{${a.name}}}`}),a.defaultValue&&(0,b.jsxs)("span",{className:"text-[var(--text-muted)]",children:["default: ",a.defaultValue]}),a.type&&(0,b.jsxs)("span",{className:"text-[var(--text-muted)]",children:["type: ",a.type]})]},a.name))]}));break}case"compress":{let c=k(a,{aggressiveness:y});d(c.compressed),D((0,b.jsx)("div",{className:"space-y-3",children:(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-xl font-bold text-[var(--foreground)] tabular-nums",children:c.originalTokens}),(0,b.jsx)("div",{className:"text-xs text-[var(--text-muted)]",children:"Original"})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-xl font-bold text-[#4ECDC4] tabular-nums",children:c.compressedTokens}),(0,b.jsx)("div",{className:"text-xs text-[var(--text-muted)]",children:"Compressed"})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsxs)("div",{className:"text-xl font-bold text-[#059669] tabular-nums",children:[c.savings,"%"]}),(0,b.jsx)("div",{className:"text-xs text-[var(--text-muted)]",children:"Saved"})]})]})}));break}case"security":{let c=n(a),{redacted:e}=o(a),f=q(a);d(e),D((0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-sm text-[var(--text-secondary)]",children:"PII: "}),(0,b.jsxs)("span",{className:`font-bold ${c.length?"text-[#dc2626]":"text-[#059669]"}`,children:[c.length," found"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-sm text-[var(--text-secondary)]",children:"Risk: "}),(0,b.jsx)("span",{className:`font-bold capitalize ${"none"===f?"text-[#059669]":"low"===f?"text-[#4ECDC4]":"text-[#dc2626]"}`,children:f})]})]}),(0,b.jsx)("p",{className:"text-sm text-[#059669]",children:"Prompt has been redacted."})]}));break}case"cost":{let c=v(a,500,e);D((0,b.jsx)("div",{className:"space-y-3",children:(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-xl font-bold text-[#4ECDC4] tabular-nums",children:c.inputTokens}),(0,b.jsx)("div",{className:"text-xs text-[var(--text-muted)]",children:"Input Tokens"})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsxs)("div",{className:"text-xl font-bold text-[var(--foreground)] tabular-nums",children:["$",c.totalCost.toFixed(4)]}),(0,b.jsx)("div",{className:"text-xs text-[var(--text-muted)]",children:"Per Request"})]})]})}));break}case"format":{let c="";switch(A){case"excel":c="\n\n=== OUTPUT FORMAT: EXCEL ===\nPlease format all output as:\n- Tabular data with clear headers\n- Currency values: $X,XXX.XX\n- Percentages: X.X%\n- Dates: YYYY-MM-DD";break;case"slides":c="\n\n=== OUTPUT FORMAT: SLIDES ===\nPlease format all output as:\n- Bullet points (max 5 per section)\n- Clear section headers\n- Key metrics highlighted\n- Executive summary first";break;case"memo":c="\n\n=== OUTPUT FORMAT: MEMO ===\nPlease structure as:\n- Executive Summary\n- Key Findings\n- Detailed Analysis\n- Recommendations\n- Appendix"}c&&!a.includes("OUTPUT FORMAT")&&d(a+c),D((0,b.jsx)("div",{className:"text-sm text-[#059669]",children:"Output format instructions added to prompt."}))}}})(c.id),className:"btn-primary w-full py-2 text-sm",disabled:!a,children:["Run ",c.name]}),C&&s===c.id&&(0,b.jsx)("div",{className:"mt-4 p-3 bg-[var(--card)] rounded-lg border border-[var(--border-color)]",children:C})]})]},c.id)})}),(0,b.jsxs)("div",{className:"card p-4 bg-[rgba(78,205,196,0.1)] border-[rgba(78,205,196,0.2)]",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-[#4ECDC4] mb-2",children:[(0,b.jsx)(f.Icons.lightbulb,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"text-sm font-medium",children:"Finance Pro Tip"})]}),(0,b.jsx)("p",{className:"text-xs text-[var(--text-secondary)]",children:"Use the Format tool to add Excel-ready or slide-friendly output instructions. Enable Audit Mode for compliance tracking in regulated environments."})]})]}),(0,b.jsx)(w,{isOpen:p,onClose:()=>r(!1),currentPrompt:a})]})}a.s(["default",()=>C],41331)}];

//# sourceMappingURL=app_playground_page_tsx_c4ee9af3._.js.map